import{j as e,m}from"./vendor-animation-DtZQNC6I.js";import{f as T,h as z,r as n}from"./vendor-react-DCKpLLFa.js";import{J as q,M as O,E as x}from"./index-EmnU2dnG.js";import{M as u,S as R}from"./SEO-C6FEOD3y.js";import{S as c,C as i}from"./section-CkoTUrwz.js";import{B as d}from"./button-C2B9ewyA.js";import{u as $}from"./use-alert-modal-B73JBodO.js";import{L as E,C as M,N as j,F as L,V as G,K as H,Z as I,_ as J}from"./vendor-icons-coWQDWRu.js";import"./vendor-redux-CQqb5_oh.js";import"./vendor-supabase-DpMu9OXC.js";import"./Header-Dr8E-v62.js";const se=()=>{const{id:r}=T(),l=z(),{showAlert:N}=$(),{data:s,isLoading:a,error:p}=q(r||"",{skip:!r}),[P,{isLoading:h}]=O(),[y,v]=n.useState(""),[g,w]=n.useState(""),[C,S]=n.useState(""),[k,F]=n.useState(""),[o,f]=n.useState("draft");n.useEffect(()=>{s&&(v(s.title),w(s.content),S(s.excerpt),F(s.tags.join(", ")),f(s.status))},[s]);const A=async t=>{if(t.preventDefault(),!!r)try{const B=k.split(",").map(b=>b.trim()).filter(b=>b.length>0),D=C||g.substring(0,150);await P({id:r,updates:{title:y,content:g,excerpt:D,status:o,tags:B}}).unwrap(),N({title:"완료",message:"게시글이 수정되었습니다!",type:"success",onConfirm:()=>{l(x.blogDetail(r))}})}catch{N({title:"오류",message:"게시글 수정에 실패했습니다",type:"error"})}};return a&&!s?e.jsx(u,{children:e.jsx(c,{className:"py-20",children:e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(E,{className:"w-10 h-10 animate-spin text-accent mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"게시글을 불러오는 중..."})]})})})}):p?e.jsx(u,{children:e.jsx(c,{className:"py-20",children:e.jsx(i,{children:e.jsxs(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"p-6 rounded-xl bg-destructive/10 border border-destructive/30 mb-6",children:[e.jsx(M,{className:"w-12 h-12 text-destructive mx-auto mb-3"}),e.jsx("p",{className:"font-medium text-destructive mb-1 text-center",children:"오류가 발생했습니다"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"data"in p?p.data?.message:"게시글을 불러올 수 없습니다"})]}),e.jsxs(d,{variant:"outline",onClick:()=>l(x.blogDetail(r)),className:"w-full",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"게시글로 돌아가기"]})]})})})}):s?e.jsxs(u,{children:[e.jsx(R,{title:`${s.title} 수정 | Blog`,description:"게시글을 수정하세요"}),e.jsx(c,{className:"pt-8 pb-4",children:e.jsxs(i,{children:[e.jsxs(d,{variant:"ghost",onClick:()=>l(x.blogDetail(r)),className:"group -ml-2 mb-6",children:[e.jsx(j,{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform"}),"게시글로 돌아가기"]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-3 bg-gradient-to-r from-accent to-purple-500 bg-clip-text text-transparent",children:"게시글 수정"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"게시글 내용을 수정하고 저장할 수 있습니다."})]})]})}),e.jsx(c,{className:"py-8",children:e.jsx(i,{children:e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:A,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"title",className:"flex items-center text-sm font-semibold text-foreground",children:[e.jsx(L,{className:"w-4 h-4 mr-2 text-accent"}),"제목 ",e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx("input",{id:"title",type:"text",value:y,onChange:t=>v(t.target.value),required:!0,disabled:a,placeholder:"게시글 제목을 입력하세요",className:`w-full px-4 py-3 bg-card border border-border rounded-lg
                    text-foreground placeholder:text-muted-foreground
                    focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-all duration-200`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"excerpt",className:"flex items-center text-sm font-semibold text-foreground",children:[e.jsx(G,{className:"w-4 h-4 mr-2 text-accent"}),"발췌 ",e.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(선택사항)"})]}),e.jsx("input",{id:"excerpt",type:"text",value:C,onChange:t=>S(t.target.value),disabled:a,placeholder:"게시글 요약 (미입력 시 본문 앞 150자 자동 추출)",className:`w-full px-4 py-3 bg-card border border-border rounded-lg
                    text-foreground placeholder:text-muted-foreground
                    focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-all duration-200`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"content",className:"flex items-center text-sm font-semibold text-foreground",children:[e.jsx(L,{className:"w-4 h-4 mr-2 text-accent"}),"내용 ",e.jsx("span",{className:"text-destructive ml-1",children:"*"}),e.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(Markdown 지원)"})]}),e.jsx("textarea",{id:"content",value:g,onChange:t=>w(t.target.value),required:!0,disabled:a,placeholder:`게시글 내용을 입력하세요

# 마크다운 문법 사용 가능
- **굵게**, *기울임*, \`코드\`
- [링크](https://example.com)
- 목록, 표, 코드 블록 등`,rows:20,className:`w-full px-4 py-3 bg-card border border-border rounded-lg
                    text-foreground placeholder:text-muted-foreground
                    focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent
                    disabled:opacity-50 disabled:cursor-not-allowed
                    resize-vertical font-mono text-sm
                    transition-all duration-200`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"tags",className:"flex items-center text-sm font-semibold text-foreground",children:[e.jsx(H,{className:"w-4 h-4 mr-2 text-accent"}),"태그"]}),e.jsx("input",{id:"tags",type:"text",value:k,onChange:t=>F(t.target.value),disabled:a,placeholder:"쉼표로 구분 (예: React, TypeScript, CMS)",className:`w-full px-4 py-3 bg-card border border-border rounded-lg
                    text-foreground placeholder:text-muted-foreground
                    focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-all duration-200`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center text-sm font-semibold text-foreground",children:["발행 상태 ",e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"status",value:"draft",checked:o==="draft",onChange:t=>f(t.target.value),disabled:a,className:"w-4 h-4 text-accent border-border focus:ring-2 focus:ring-accent/50 cursor-pointer"}),e.jsx("span",{className:"ml-2 text-foreground group-hover:text-accent transition-colors",children:"임시저장"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"status",value:"published",checked:o==="published",onChange:t=>f(t.target.value),disabled:a,className:"w-4 h-4 text-accent border-border focus:ring-2 focus:ring-accent/50 cursor-pointer"}),e.jsx("span",{className:"ml-2 text-foreground group-hover:text-accent transition-colors",children:"발행"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-8 border-t border-border",children:[e.jsx(d,{type:"submit",disabled:a||h,size:"lg",className:`flex-1 ${o==="published"?"bg-green-500 hover:bg-green-600":"bg-accent hover:bg-accent/90"} shadow-lg hover:shadow-xl transition-all group`,children:h?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5 mr-2 animate-spin"}),"저장 중..."]}):o==="published"?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-5 h-5 mr-2 group-hover:translate-x-1 transition-transform"}),"저장 및 발행"]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform"}),"저장"]})}),e.jsx(d,{type:"button",variant:"outline",onClick:()=>l(x.blogDetail(r)),disabled:a||h,size:"lg",className:"flex-1",children:"취소"})]})]})})})})]}):e.jsx(u,{children:e.jsx(c,{className:"py-20",children:e.jsx(i,{children:e.jsxs(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-20 max-w-md mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(M,{className:"w-12 h-12 text-accent"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"게시글을 찾을 수 없습니다"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"삭제되었거나 존재하지 않는 게시글입니다"}),e.jsxs(d,{size:"lg",onClick:()=>l("/posts"),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"목록으로 돌아가기"]})]})})})})};export{se as default};
