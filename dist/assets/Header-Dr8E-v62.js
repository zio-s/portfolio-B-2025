import{j as e}from"./vendor-animation-DtZQNC6I.js";import{r as x,L as _,u as y,h as L}from"./vendor-react-DCKpLLFa.js";import{m as b,i as C,k as w,$ as z,a0 as B,a1 as S,a2 as H,P as I}from"./index-EmnU2dnG.js";import{aa as k,ab as V,U as $,ac as E,a4 as R,ad as P,w as W,V as A}from"./vendor-icons-coWQDWRu.js";function O(){const a=x.useCallback(s=>b.confirm(s),[]),n=x.useCallback(s=>{b.close(s)},[]);return{showConfirm:a,closeConfirm:n}}const U=a=>{const s=Date.now()-a,h=Math.floor(s/(1e3*60)),t=Math.floor(s/(1e3*60*60)),o=Math.floor(s/(1e3*60*60*24));let c="";h<1?c="방금 전":h<60?c=`${h}분 전`:t<24?c=`${t}시간 전`:o<7?c=`${o}일 전`:c="일주일 이상";const p=new Date(a).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return{relative:c,absolute:p}},D=a=>{const n=new Date().setHours(0,0,0,0),s=n-1440*60*1e3,h=n-10080*60*1e3;return{today:a.filter(t=>t.timestamp>=n),yesterday:a.filter(t=>t.timestamp>=s&&t.timestamp<n),thisWeek:a.filter(t=>t.timestamp>=h&&t.timestamp<s),older:a.filter(t=>t.timestamp<h)}},T=()=>{const a=C(),n=w(z),s=w(B),{showConfirm:h}=O(),[t,o]=x.useState(!1),[c,j]=x.useState(""),p=x.useMemo(()=>{if(!c.trim())return n;const i=c.toLowerCase();return n.filter(l=>l.title.toLowerCase().includes(i)||l.description?.toLowerCase().includes(i))},[n,c]),m=x.useMemo(()=>D(p),[p]),u=()=>o(i=>!i),f=()=>{o(!1),j("")},r=()=>{h({title:"전체 삭제",message:"최근 방문 기록을 모두 삭제하시겠습니까?",type:"warning",confirmText:"삭제",cancelText:"취소",onConfirm:()=>{a(S()),f()}})},g=(i,l)=>{l.preventDefault(),l.stopPropagation(),a(H(i))};x.useEffect(()=>{const i=l=>{l.key==="Escape"&&t&&f()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t]),x.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const v=(i,l)=>l.length===0?null:e.jsxs("div",{className:"recent-panel__section",children:[e.jsx("h4",{className:"recent-panel__section-title",children:i}),e.jsx("div",{className:"recent-panel__timeline",children:l.map(d=>{const N=U(d.timestamp);return e.jsxs(_,{to:d.path,className:"recent-panel__card",onClick:f,children:[e.jsx("div",{className:"recent-panel__timeline-dot"}),d.thumbnail&&e.jsxs("div",{className:"recent-panel__thumbnail",children:[e.jsx("img",{src:d.thumbnail,alt:d.title}),e.jsx("div",{className:"recent-panel__thumbnail-overlay",children:e.jsx("svg",{width:"24",height:"24",fill:"white",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})})})]}),e.jsxs("div",{className:"recent-panel__content",children:[e.jsxs("div",{className:"recent-panel__header",children:[e.jsx("h5",{className:"recent-panel__title",children:d.title}),e.jsx("button",{className:"recent-panel__remove",onClick:M=>g(d.id,M),title:"삭제",children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),d.description&&e.jsx("p",{className:"recent-panel__description",children:d.description}),e.jsxs("div",{className:"recent-panel__meta",children:[e.jsxs("time",{className:"recent-panel__time",title:N.absolute,children:[e.jsx("svg",{width:"14",height:"14",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})}),N.relative]}),e.jsx("span",{className:"recent-panel__type",children:d.type==="project"?"프로젝트":"페이지"})]})]})]},d.id)})})]});return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"recent-panel__trigger",onClick:u,"aria-label":"최근 방문 항목",children:[e.jsx("svg",{className:"recent-panel__trigger-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s>0&&e.jsx("span",{className:"recent-panel__badge",children:s})]}),e.jsx("div",{className:`recent-panel__overlay ${t?"recent-panel__overlay--visible":""}`,onClick:f}),e.jsxs("aside",{className:`recent-panel ${t?"recent-panel--open":""}`,children:[e.jsxs("div",{className:"recent-panel__header-section",children:[e.jsxs("div",{className:"recent-panel__header-top",children:[e.jsxs("h2",{className:"recent-panel__main-title",children:[e.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})}),"최근 방문"]}),e.jsx("button",{className:"recent-panel__close",onClick:f,"aria-label":"닫기",children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),e.jsxs("div",{className:"recent-panel__search",children:[e.jsx("svg",{className:"recent-panel__search-icon",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),e.jsx("input",{type:"text",className:"recent-panel__search-input",placeholder:"프로젝트 검색...",value:c,onChange:i=>j(i.target.value)}),c&&e.jsx("button",{className:"recent-panel__search-clear",onClick:()=>j(""),children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),s>0&&e.jsxs("button",{className:"recent-panel__clear-all",onClick:r,children:[e.jsx("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),"전체 삭제"]})]}),e.jsx("div",{className:"recent-panel__body",children:s===0?e.jsxs("div",{className:"recent-panel__empty",children:[e.jsx("svg",{className:"recent-panel__empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"recent-panel__empty-title",children:"방문 기록이 없습니다"}),e.jsx("p",{className:"recent-panel__empty-text",children:"프로젝트를 방문하면 여기에 표시됩니다"})]}):p.length===0?e.jsxs("div",{className:"recent-panel__empty",children:[e.jsx("svg",{className:"recent-panel__empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("h3",{className:"recent-panel__empty-title",children:"검색 결과 없음"}),e.jsxs("p",{className:"recent-panel__empty-text",children:['"',c,'"에 해당하는 항목이 없습니다']})]}):e.jsxs(e.Fragment,{children:[v("오늘",m.today),v("어제",m.yesterday),v("이번 주",m.thisWeek),v("그 이전",m.older)]})})]})]})},F=[{id:"dashboard",label:"홈",icon:e.jsx(k,{className:"w-5 h-5"}),href:"/dashboard"},{id:"projects",label:"프로젝트",icon:e.jsx(P,{className:"w-5 h-5"}),href:"/admin/projects"},{id:"comments",label:"댓글",icon:e.jsx(W,{className:"w-5 h-5"}),href:"/admin/comments"},{id:"guestbook",label:"방문록",icon:e.jsx(A,{className:"w-5 h-5"}),href:"/admin/guestbook"}];function q({mode:a="admin",user:n,onLogout:s,publicMenuItems:h=[]}){const[t,o]=x.useState(!1),c=y(),j=()=>n?n.name.charAt(0).toUpperCase():"U",p=()=>{o(!1)},m=()=>{o(!1),s?.()},u=r=>r==="/"?c.pathname==="/":c.pathname.startsWith(r),f=a==="admin"?F:(h||[]).map(r=>({id:r.id,label:r.label,href:r.href,icon:r.icon||e.jsx(k,{className:"w-5 h-5"}),badge:r.badge}));return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(!0),className:"inline-flex items-center justify-center rounded-md p-2 hover:bg-accent/10 transition-colors lg:hidden","aria-label":"메뉴 열기",children:e.jsx(V,{className:"w-6 h-6"})}),t&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm animate-in fade-in-0",onClick:()=>o(!1),"aria-hidden":"true"}),e.jsx("div",{className:`fixed inset-y-0 right-0 z-50 w-[300px] sm:w-[350px] bg-card border-l border-border shadow-2xl transform transition-transform duration-300 ease-out ${t?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Menu"}),e.jsx("button",{onClick:()=>o(!1),className:"rounded-md p-1.5 hover:bg-accent/10 transition-colors","aria-label":"닫기",children:e.jsx("span",{className:"text-xl",children:"×"})})]}),(a==="admin"||n)&&n&&e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-accent/5 hover:bg-accent/10 transition-colors cursor-pointer group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-border group-hover:border-accent transition-colors flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 text-white font-semibold",children:n.avatar?e.jsx("img",{src:n.avatar,alt:n.name,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{children:j()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm truncate group-hover:text-accent transition-colors",children:n.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n.email})]}),e.jsx($,{className:"w-4 h-4 text-muted-foreground group-hover:text-accent transition-colors"})]})]}),e.jsx("div",{className:"h-px bg-border mx-4"}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1",children:f.map(r=>e.jsxs(_,{to:r.href,onClick:p,className:`flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all duration-200 hover:translate-x-1 active:scale-[0.98] ${u(r.href)?"bg-accent text-white shadow-sm":"hover:bg-accent/10"}`,children:[e.jsx("span",{className:`transition-transform duration-200 ${u(r.href)?"scale-110":""}`,children:r.icon}),e.jsx("span",{className:"flex-1 font-medium text-sm",children:r.label}),r.badge&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold transition-colors ${u(r.href)?"bg-white/20 text-white":"bg-accent/10 text-accent"}`,children:r.badge})]},r.id))}),e.jsx("div",{className:"h-px bg-border mx-4"}),e.jsxs("div",{className:"p-4 space-y-2",children:[a==="admin"&&e.jsxs(_,{to:"/settings",onClick:p,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left hover:bg-accent/10 transition-all duration-200 hover:translate-x-1 active:scale-[0.98]",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{className:"flex-1 font-medium text-sm",children:"설정"})]}),a==="admin"&&e.jsx("div",{className:"h-px bg-border my-2"}),n&&e.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left text-destructive hover:bg-destructive/10 transition-all duration-200 hover:translate-x-1 active:scale-[0.98]",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{className:"flex-1 font-medium text-sm",children:"로그아웃"})]})]})]})})]})}const X=({mode:a="admin",onMenuToggle:n,user:s,onLogoClick:h,logoText:t="Portfolio CMS",publicMenuItems:o=[]})=>{const c=C(),j=L(),p=y(),[m,u]=x.useState(!1),f=x.useRef(null),r=l=>l==="/"?p.pathname==="/":p.pathname.startsWith(l),g=()=>{u(l=>!l)},v=async()=>{try{await c(I()).unwrap(),j(a==="admin"?"/admin/login":"/")}catch{}u(!1)},i=()=>s?s.name.charAt(0).toUpperCase():"U";return x.useEffect(()=>{const l=d=>{f.current&&!f.current.contains(d.target)&&u(!1)};return m&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[m]),e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header__left",children:[a==="admin"&&n&&e.jsx("button",{className:"header__menu-toggle header__menu-toggle--desktop",onClick:n,"aria-label":"사이드바 토글",children:e.jsx("svg",{className:"header__menu-toggle-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs(_,{to:a==="admin"?"/admin":"/",className:"header__logo",onClick:h,children:[e.jsxs("svg",{className:"header__logo-icon",fill:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 18.5c-4.28-1.05-7.5-5.28-7.5-9.5V8.3l7.5-3.75L19.5 8.3V11c0 4.22-3.22 8.45-7.5 9.5z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),e.jsx("span",{className:"header__logo-text",children:t})]}),a==="public"&&o.length>0&&e.jsx("nav",{className:"header__nav header__nav--desktop",children:o.map(l=>e.jsx(_,{to:l.href,className:`header__nav-item ${r(l.href)?"header__nav-item--active":""}`,children:l.label},l.id))})]}),e.jsxs("div",{className:"header__right",children:[a==="admin"&&e.jsx("div",{className:"header__recent-panel--desktop",children:e.jsx(T,{})}),a==="admin"&&s&&e.jsxs("div",{className:"header__profile header__profile--desktop",ref:f,children:[e.jsxs("button",{className:"header__profile-button",onClick:g,"aria-label":"사용자 메뉴","aria-expanded":m,children:[e.jsx("div",{className:"header__profile-avatar",children:s.avatar?e.jsx("img",{src:s.avatar,alt:s.name}):e.jsx("span",{children:i()})}),e.jsx("span",{className:"header__profile-name",children:s.name}),e.jsx("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 24 24",style:{transform:m?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"},children:e.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),e.jsxs("div",{className:`header__profile-dropdown ${m?"header__profile-dropdown--open":""}`,children:[e.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"2px"},children:s.name}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:s.email})]}),e.jsxs(_,{to:"/profile",className:"header__profile-dropdown-item",onClick:()=>u(!1),children:[e.jsx("svg",{className:"header__profile-dropdown-icon",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),e.jsx("span",{children:"프로필"})]}),e.jsxs(_,{to:"/settings",className:"header__profile-dropdown-item",onClick:()=>u(!1),children:[e.jsx("svg",{className:"header__profile-dropdown-icon",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),e.jsx("span",{children:"설정"})]}),e.jsx("div",{className:"header__profile-dropdown-divider"}),e.jsxs("button",{className:"header__profile-dropdown-item header__profile-dropdown-item--danger",onClick:v,children:[e.jsx("svg",{className:"header__profile-dropdown-icon",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),e.jsx("span",{children:"로그아웃"})]})]})]}),e.jsx(q,{mode:a,user:s,onLogout:v,publicMenuItems:o})]})]})};export{X as H,O as u};
