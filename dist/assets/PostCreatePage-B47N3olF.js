import{j as e,m as p}from"./vendor-animation-Qsj9kxsB.js";import{h as k,r}from"./vendor-react-DCKpLLFa.js";import{F as E,E as M}from"./index-Gdjm1SHZ.js";import{M as L,S as T}from"./SEO-DzEyBoZz.js";import{S as g,C as h}from"./section-B_BI7cPF.js";import{B as c}from"./button-DgHbXKZY.js";import{u as A}from"./use-alert-modal-BAro2Nu2.js";import{K as B,F as f,V as P,J as z,L as q,W as D,Y as O}from"./vendor-icons-90zywYms.js";import"./vendor-redux-CQqb5_oh.js";import"./vendor-supabase-DpMu9OXC.js";import"./Header-DWqEjzJy.js";const U=()=>{const o=k(),[b,{isLoading:s}]=E(),{showAlert:i}=A(),[d,j]=r.useState(""),[n,N]=r.useState(""),[m,v]=r.useState(""),[u,y]=r.useState(""),[a,x]=r.useState("draft"),w=async t=>{t.preventDefault();try{const C=u.split(",").map(l=>l.trim()).filter(l=>l.length>0),S=m||n.substring(0,150),F=await b({title:d,content:n,excerpt:S,status:a,tags:C}).unwrap();i({title:"완료",message:`게시글이 ${a==="published"?"발행":"임시저장"}되었습니다!`,type:"success",onConfirm:()=>{o(M.blogDetail(F.id))}})}catch{i({title:"오류",message:"게시글 작성에 실패했습니다",type:"error"})}};return e.jsxs(L,{children:[e.jsx(T,{title:"새 게시글 작성 | Blog",description:"새로운 블로그 게시글을 작성하세요"}),e.jsx(g,{className:"pt-8 pb-4",children:e.jsxs(h,{children:[e.jsxs(c,{variant:"ghost",onClick:()=>o("/blog"),className:"group -ml-2 mb-6",children:[e.jsx(B,{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform"}),"목록으로 돌아가기"]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-3 bg-gradient-to-r from-accent to-purple-500 bg-clip-text text-transparent",children:"새 게시글 작성"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"게시글을 작성하고 발행하거나 임시저장할 수 있습니다."})]})]})}),e.jsx(g,{className:"py-8",children:e.jsx(h,{children:e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"title",className:"flex items-center text-sm font-semibold text-foreground",children:[e.jsx(f,{className:"w-4 h-4 mr-2 text-accent"}),"제목 ",e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx("input",{id:"title",type:"text",value:d,onChange:t=>j(t.target.value),required:!0,disabled:s,placeholder:"게시글 제목을 입력하세요",className:`w-full px-4 py-3 bg-card border border-border rounded-lg
                    text-foreground placeholder:text-muted-foreground
                    focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-all duration-200`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"excerpt",className:"flex items-center text-sm font-semibold text-foreground",children:[e.jsx(P,{className:"w-4 h-4 mr-2 text-accent"}),"발췌 ",e.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(선택사항)"})]}),e.jsx("input",{id:"excerpt",type:"text",value:m,onChange:t=>v(t.target.value),disabled:s,placeholder:"게시글 요약 (미입력 시 본문 앞 150자 자동 추출)",className:`w-full px-4 py-3 bg-card border border-border rounded-lg
                    text-foreground placeholder:text-muted-foreground
                    focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-all duration-200`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"content",className:"flex items-center text-sm font-semibold text-foreground",children:[e.jsx(f,{className:"w-4 h-4 mr-2 text-accent"}),"내용 ",e.jsx("span",{className:"text-destructive ml-1",children:"*"}),e.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(Markdown 지원)"})]}),e.jsx("textarea",{id:"content",value:n,onChange:t=>N(t.target.value),required:!0,disabled:s,placeholder:`게시글 내용을 입력하세요

# 마크다운 문법 사용 가능
- **굵게**, *기울임*, \`코드\`
- [링크](https://example.com)
- 목록, 표, 코드 블록 등`,rows:20,className:`w-full px-4 py-3 bg-card border border-border rounded-lg
                    text-foreground placeholder:text-muted-foreground
                    focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent
                    disabled:opacity-50 disabled:cursor-not-allowed
                    resize-vertical font-mono text-sm
                    transition-all duration-200`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"tags",className:"flex items-center text-sm font-semibold text-foreground",children:[e.jsx(z,{className:"w-4 h-4 mr-2 text-accent"}),"태그"]}),e.jsx("input",{id:"tags",type:"text",value:u,onChange:t=>y(t.target.value),disabled:s,placeholder:"쉼표로 구분 (예: React, TypeScript, CMS)",className:`w-full px-4 py-3 bg-card border border-border rounded-lg
                    text-foreground placeholder:text-muted-foreground
                    focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-all duration-200`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center text-sm font-semibold text-foreground",children:["발행 상태 ",e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"status",value:"draft",checked:a==="draft",onChange:t=>x(t.target.value),disabled:s,className:"w-4 h-4 text-accent border-border focus:ring-2 focus:ring-accent/50 cursor-pointer"}),e.jsx("span",{className:"ml-2 text-foreground group-hover:text-accent transition-colors",children:"임시저장"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"status",value:"published",checked:a==="published",onChange:t=>x(t.target.value),disabled:s,className:"w-4 h-4 text-accent border-border focus:ring-2 focus:ring-accent/50 cursor-pointer"}),e.jsx("span",{className:"ml-2 text-foreground group-hover:text-accent transition-colors",children:"바로 발행"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-8 border-t border-border",children:[e.jsx(c,{type:"submit",disabled:s,size:"lg",className:`flex-1 ${a==="published"?"bg-green-500 hover:bg-green-600":"bg-accent hover:bg-accent/90"} shadow-lg hover:shadow-xl transition-all group`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-5 h-5 mr-2 animate-spin"}),"작성 중..."]}):a==="published"?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-5 h-5 mr-2 group-hover:translate-x-1 transition-transform"}),"발행하기"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform"}),"임시저장"]})}),e.jsx(c,{type:"button",variant:"outline",onClick:()=>o("/blog"),disabled:s,size:"lg",className:"flex-1",children:"취소"})]})]})})})})]})};export{U as default};
