import{j as e}from"./vendor-animation-Qsj9kxsB.js";import{r as i}from"./vendor-react-DCKpLLFa.js";import{A as C}from"./AdminLayout-B44TAUY9.js";import{X as $,C as p,L,a2 as M,a3 as k,E as S,H as U,M as P,a4 as E,Q as F}from"./vendor-icons-90zywYms.js";import{u as R}from"./use-alert-modal-BAro2Nu2.js";import{u as A}from"./Header-DWqEjzJy.js";import{u as D,U as T,V as z,W as B}from"./index-Gdjm1SHZ.js";import"./vendor-redux-CQqb5_oh.js";import"./vendor-supabase-DpMu9OXC.js";const H=({project:n,onSubmit:x,onCancel:d,isOpen:c})=>{const[t,o]=i.useState({title:"",description:"",content:"",thumbnail:"",images:"",techStack:"",category:"web",tags:"",githubUrl:"",liveUrl:"",status:"public",featured:!1}),[a,v]=i.useState(!1),[l,j]=i.useState({}),[f,N]=i.useState(!1),[h,b]=i.useState(!1);i.useEffect(()=>{o(n?{title:n.title||"",description:n.description||"",content:n.content||"",thumbnail:n.thumbnail||"",images:n.images?.join(`
`)||"",techStack:n.techStack?.join(", ")||"",category:n.category||"web",tags:n.tags?.join(", ")||"",githubUrl:n.githubUrl||"",liveUrl:n.liveUrl||"",status:n.status||"public",featured:n.featured||!1}:{title:"",description:"",content:"",thumbnail:"",images:"",techStack:"",category:"web",tags:"",githubUrl:"",liveUrl:"",status:"public",featured:!1}),j({})},[n,c]),i.useEffect(()=>{if(c)b(!0),setTimeout(()=>N(!0),10);else{N(!1);const s=setTimeout(()=>b(!1),300);return()=>clearTimeout(s)}},[c]),i.useEffect(()=>{const s=g=>{g.key==="Escape"&&c&&d()};return c&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[c,d]);const y=()=>{const s={};return t.title.trim()||(s.title="제목을 입력해주세요"),t.description.trim()||(s.description="설명을 입력해주세요"),t.content.trim()||(s.content="내용을 입력해주세요"),t.thumbnail.trim()||(s.thumbnail="썸네일 URL을 입력해주세요"),t.techStack.trim()||(s.techStack="기술 스택을 입력해주세요"),j(s),Object.keys(s).length===0},w=async s=>{if(s.preventDefault(),!!y()){v(!0);try{const g={title:t.title,description:t.description,content:t.content,thumbnail:t.thumbnail,images:t.images.split(`
`).map(u=>u.trim()).filter(Boolean),techStack:t.techStack.split(",").map(u=>u.trim()).filter(Boolean),category:t.category,tags:t.tags.split(",").map(u=>u.trim()).filter(Boolean),githubUrl:t.githubUrl||void 0,liveUrl:t.liveUrl||void 0,status:t.status,featured:t.featured};await x(g)}catch{}finally{v(!1)}}};return h?e.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 md:p-8 bg-background/80 backdrop-blur-sm transition-opacity duration-300 ${f?"opacity-100":"opacity-0"}`,onClick:d,children:e.jsxs("div",{className:`relative w-full max-w-3xl max-h-[90vh] overflow-y-auto bg-card border border-border rounded-lg shadow-xl transition-all duration-300 ${f?"opacity-100 scale-100":"opacity-0 scale-90"}`,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-6 py-4 bg-card border-b border-border",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:n?"프로젝트 수정":"새 프로젝트 생성"}),e.jsx("button",{onClick:d,className:"p-2 rounded-md hover:bg-muted transition-all duration-200 text-muted-foreground hover:text-foreground cursor-pointer hover:rotate-90",disabled:a,children:e.jsx($,{className:"w-5 h-5 transition-transform duration-200"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["제목 ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("input",{type:"text",value:t.title,onChange:s=>o({...t,title:s.target.value}),className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors placeholder:text-muted-foreground ${l.title?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"프로젝트 제목",disabled:a}),l.title&&e.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),l.title]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["설명 ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("textarea",{value:t.description,onChange:s=>o({...t,description:s.target.value}),rows:3,className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors resize-none placeholder:text-muted-foreground ${l.description?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"간단한 프로젝트 설명",disabled:a}),l.description&&e.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),l.description]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["내용 (Markdown) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("textarea",{value:t.content,onChange:s=>o({...t,content:s.target.value}),rows:10,className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors resize-vertical font-mono text-sm placeholder:text-muted-foreground ${l.content?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"Markdown 형식으로 프로젝트 상세 내용 작성",disabled:a}),l.content&&e.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),l.content]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["썸네일 URL ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("input",{type:"url",value:t.thumbnail,onChange:s=>o({...t,thumbnail:s.target.value}),className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors placeholder:text-muted-foreground ${l.thumbnail?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"https://example.com/image.jpg",disabled:a}),l.thumbnail&&e.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),l.thumbnail]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["카테고리 ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("select",{value:t.category,onChange:s=>o({...t,category:s.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors cursor-pointer",disabled:a,children:[e.jsx("option",{value:"web",children:"Web"}),e.jsx("option",{value:"mobile",children:"Mobile"}),e.jsx("option",{value:"backend",children:"Backend"}),e.jsx("option",{value:"fullstack",children:"Fullstack"}),e.jsx("option",{value:"design",children:"Design"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["추가 이미지 URLs ",e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(한 줄에 하나씩)"})]}),e.jsx("textarea",{value:t.images,onChange:s=>o({...t,images:s.target.value}),rows:3,className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors resize-vertical font-mono text-sm placeholder:text-muted-foreground",placeholder:`https://example.com/image1.jpg
https://example.com/image2.jpg`,disabled:a})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["기술 스택 ",e.jsx("span",{className:"text-destructive",children:"*"})," ",e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(쉼표로 구분)"})]}),e.jsx("input",{type:"text",value:t.techStack,onChange:s=>o({...t,techStack:s.target.value}),className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors placeholder:text-muted-foreground ${l.techStack?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"React, TypeScript, Vite",disabled:a}),l.techStack&&e.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),l.techStack]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["태그 ",e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(쉼표로 구분)"})]}),e.jsx("input",{type:"text",value:t.tags,onChange:s=>o({...t,tags:s.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors placeholder:text-muted-foreground",placeholder:"portfolio, interactive, rtk-query",disabled:a})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:"GitHub URL"}),e.jsx("input",{type:"url",value:t.githubUrl,onChange:s=>o({...t,githubUrl:s.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors placeholder:text-muted-foreground",placeholder:"https://github.com/username/repo",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:"Live URL"}),e.jsx("input",{type:"url",value:t.liveUrl,onChange:s=>o({...t,liveUrl:s.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors placeholder:text-muted-foreground",placeholder:"https://example.com",disabled:a})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["공개 상태 ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("select",{value:t.status,onChange:s=>o({...t,status:s.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors cursor-pointer",disabled:a,children:[e.jsx("option",{value:"public",children:"Public (공개)"}),e.jsx("option",{value:"private",children:"Private (비공개)"})]})]}),e.jsx("div",{className:"flex items-end pb-1",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.featured,onChange:s=>o({...t,featured:s.target.checked}),className:"w-4 h-4 rounded border-border text-accent focus:ring-accent focus:ring-offset-0 cursor-pointer",disabled:a}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Featured 프로젝트로 표시"})]})})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row items-center justify-end gap-3 pt-4 border-t border-border",children:[e.jsx("button",{type:"button",onClick:d,disabled:a,className:"w-full sm:w-auto px-6 py-2.5 rounded-lg border border-border bg-background hover:bg-muted transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"취소"}),e.jsxs("button",{type:"submit",disabled:a,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-2.5 rounded-lg bg-accent text-white hover:bg-accent/90 transition-colors font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[a&&e.jsx(L,{className:"w-4 h-4 animate-spin"}),a?"저장 중...":n?"수정하기":"생성하기"]})]})]})]})}):null},J=()=>{const[n,x]=i.useState(!1),[d,c]=i.useState(null),{showAlert:t}=R(),{showConfirm:o}=A(),{data:a,isLoading:v,error:l}=D({limit:100}),[j]=T(),[f]=z(),[N]=B(),h=a?.items||[],b=async(r,m)=>{o({title:"프로젝트 삭제",message:`"${m}"을(를) 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`,type:"danger",confirmText:"삭제",cancelText:"취소",onConfirm:async()=>{try{await j(r).unwrap(),t({title:"삭제 완료",message:"프로젝트가 삭제되었습니다.",type:"success"})}catch{t({title:"삭제 실패",message:"프로젝트 삭제에 실패했습니다.",type:"error"})}}})},y=async(r,m)=>{try{await f({id:r,featured:!m}).unwrap(),t({title:m?"고정 해제":"고정 완료",message:m?"프로젝트 고정이 해제되었습니다.":"프로젝트가 Featured로 고정되었습니다.",type:"success"})}catch{t({title:"Featured 설정 실패",message:"Featured 상태 변경에 실패했습니다.",type:"error"})}},w=()=>{c(null),x(!0)},s=r=>{c(r),x(!0)},g=async r=>{try{d?(await f({id:d.id,...r}).unwrap(),t({title:"수정 완료",message:"프로젝트가 수정되었습니다.",type:"success"})):(await N(r).unwrap(),t({title:"생성 완료",message:"프로젝트가 생성되었습니다.",type:"success"})),x(!1),c(null)}catch(m){throw t({title:"저장 실패",message:"프로젝트 저장에 실패했습니다.",type:"error"}),m}},u=()=>{x(!1),c(null)};return v?e.jsx(C,{children:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(L,{className:"w-8 h-8 animate-spin text-accent"})})}):e.jsxs(C,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"포트폴리오 프로젝트를 관리합니다"})]}),e.jsxs("button",{onClick:w,className:"inline-flex items-center gap-2 px-4 py-2 bg-accent text-white rounded-lg font-medium hover:bg-accent/90 transition-colors shadow-sm",children:[e.jsx(M,{className:"w-4 h-4"}),"새 프로젝트"]})]}),l&&e.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/20",children:e.jsx("p",{className:"text-sm text-destructive",children:"프로젝트를 불러올 수 없습니다. 다시 시도해주세요."})}),e.jsx("div",{className:"hidden md:block overflow-hidden rounded-lg border border-border bg-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-muted/50",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"제목"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"카테고리"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Featured"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"통계"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"관리"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:h.map(r=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("div",{className:"font-semibold text-sm mb-1",children:r.title}),e.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:r.description})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-accent/10 text-accent border border-accent/20",children:r.category})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("button",{onClick:()=>y(r.id,r.featured),className:`inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${r.featured?"bg-accent text-white hover:bg-accent/90":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:[e.jsx(k,{className:`w-3 h-3 ${r.featured?"fill-current":""}`}),r.featured?"YES":"NO"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),r.stats.views]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),r.stats.likes]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"}),r.stats.comments]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>s(r),className:"p-2 rounded-md hover:bg-muted transition-colors text-foreground",title:"수정",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(r.id,r.title),className:"p-2 rounded-md hover:bg-destructive/10 transition-colors text-destructive",title:"삭제",children:e.jsx(F,{className:"w-4 h-4"})})]})})]},r.id))})]})})}),e.jsx("div",{className:"md:hidden space-y-4",children:h.map(r=>e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-card space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1 truncate",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:r.description})]}),r.featured&&e.jsx(k,{className:"w-4 h-4 text-accent fill-current flex-shrink-0"})]}),e.jsx("div",{children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-accent/10 text-accent border border-accent/20",children:r.category})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),r.stats.views]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),r.stats.likes]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"}),r.stats.comments]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-border",children:[e.jsxs("button",{onClick:()=>y(r.id,r.featured),className:`flex-1 inline-flex items-center justify-center gap-1.5 px-3 py-2 rounded-md text-xs font-medium transition-colors ${r.featured?"bg-accent text-white hover:bg-accent/90":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:[e.jsx(k,{className:`w-3 h-3 ${r.featured?"fill-current":""}`}),r.featured?"Featured":"Not Featured"]}),e.jsx("button",{onClick:()=>s(r),className:"px-3 py-2 rounded-md hover:bg-muted transition-colors text-foreground",title:"수정",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(r.id,r.title),className:"px-3 py-2 rounded-md hover:bg-destructive/10 transition-colors text-destructive",title:"삭제",children:e.jsx(F,{className:"w-4 h-4"})})]})]},r.id))}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["전체 ",e.jsx("span",{className:"font-semibold text-foreground",children:h.length}),"개의 프로젝트"]})]}),e.jsx(H,{project:d,onSubmit:g,onCancel:u,isOpen:n})]})};export{J as AdminProjectsPage,J as default};
