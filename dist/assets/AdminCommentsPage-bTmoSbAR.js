import{j as e}from"./vendor-animation-DtZQNC6I.js";import{A as l}from"./AdminLayout-D4LQ0imw.js";import{u as j}from"./use-alert-modal-B73JBodO.js";import{u as N}from"./Header-Dr8E-v62.js";import{Y as g,p as b}from"./index-EmnU2dnG.js";import{L as v,M as c,H as n,Y as x}from"./vendor-icons-coWQDWRu.js";import"./vendor-react-DCKpLLFa.js";import"./vendor-redux-CQqb5_oh.js";import"./vendor-supabase-DpMu9OXC.js";const I=()=>{const{data:o,isLoading:m,error:h}=g(),[u]=b(),{showAlert:a}=j(),{showConfirm:p}=N(),r=o?.items||[],d=async(s,t)=>{const f=t.length>30?t.substring(0,30)+"...":t;p({title:"댓글 삭제",message:`"${f}"을(를) 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`,type:"danger",confirmText:"삭제",cancelText:"취소",onConfirm:async()=>{try{await u(s).unwrap(),a({title:"삭제 완료",message:"댓글이 삭제되었습니다.",type:"success"})}catch{a({title:"삭제 실패",message:"댓글 삭제에 실패했습니다.",type:"error"})}}})},i=s=>new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"});return m?e.jsx(l,{children:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(v,{className:"w-8 h-8 animate-spin text-accent"})})}):e.jsx(l,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"댓글"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"프로젝트에 달린 댓글을 관리합니다"})]}),h&&e.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/20",children:e.jsx("p",{className:"text-sm text-destructive",children:"댓글을 불러올 수 없습니다. 다시 시도해주세요."})}),e.jsx("div",{className:"hidden md:block overflow-hidden rounded-lg border border-border bg-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-muted/50",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"프로젝트"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"작성자"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"내용"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"좋아요"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"작성일"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"관리"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:r.map(s=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-accent/10 text-accent border border-accent/20",children:["Project #",s.projectId]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.authorAvatar?e.jsx("img",{src:s.authorAvatar,alt:s.authorName,className:"w-10 h-10 rounded-full border-2 border-border"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-accent flex items-center justify-center text-white font-semibold text-sm",children:s.authorName[0]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-semibold text-sm truncate",children:s.authorName}),s.authorEmail&&e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:s.authorEmail})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-foreground line-clamp-3 whitespace-pre-wrap max-w-md",children:s.content}),s.parentId&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(c,{className:"w-3 h-3"}),e.jsx("span",{children:"답글"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground",children:[e.jsx(n,{className:"w-4 h-4"}),s.likes]})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm text-muted-foreground whitespace-nowrap",children:i(s.createdAt)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{onClick:()=>d(s.id,s.content),className:"p-2 rounded-md hover:bg-destructive/10 transition-colors text-destructive cursor-pointer",title:"삭제",children:e.jsx(x,{className:"w-4 h-4"})})})})]},s.id))})]})})}),e.jsx("div",{className:"md:hidden space-y-4",children:r.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-card space-y-3",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.authorAvatar?e.jsx("img",{src:s.authorAvatar,alt:s.authorName,className:"w-10 h-10 rounded-full border-2 border-border flex-shrink-0"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-accent flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:s.authorName[0]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-sm truncate",children:s.authorName}),s.authorEmail&&e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:s.authorEmail})]})]})}),e.jsx("div",{className:"text-sm text-foreground whitespace-pre-wrap",children:s.content}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground flex-wrap",children:[e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-accent/10 text-accent border border-accent/20",children:["Project #",s.projectId]}),s.parentId&&e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(c,{className:"w-3 h-3"}),"답글"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(n,{className:"w-3 h-3"}),s.likes]}),e.jsx("span",{children:i(s.createdAt)})]}),e.jsx("div",{className:"pt-3 border-t border-border",children:e.jsxs("button",{onClick:()=>d(s.id,s.content),className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md hover:bg-destructive/10 transition-colors text-destructive cursor-pointer text-sm font-medium",children:[e.jsx(x,{className:"w-4 h-4"}),"삭제"]})})]},s.id))}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["전체 ",e.jsx("span",{className:"font-semibold text-foreground",children:r.length}),"개의 댓글"]})]})})};export{I as AdminCommentsPage,I as default};
