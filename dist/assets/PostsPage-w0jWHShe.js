import{j as e,m as n}from"./vendor-animation-Qsj9kxsB.js";import{h as _,r as B,L as g}from"./vendor-react-DCKpLLFa.js";import{k as R,l as $,b as z,C as O,D as G,R as y,E as N}from"./index-Gdjm1SHZ.js";import{M as H,S as Q}from"./SEO-DzEyBoZz.js";import{S as l,C as c}from"./section-B_BI7cPF.js";import{B as d}from"./button-DgHbXKZY.js";import{B as U}from"./badge-CI1yv82F.js";import{u as q}from"./use-alert-modal-BAro2Nu2.js";import{u as I}from"./Header-DWqEjzJy.js";import{S as m,L as K,C as F,H as J,M as V,E as W,w as X,Q as Y}from"./vendor-icons-90zywYms.js";import"./vendor-redux-CQqb5_oh.js";import"./vendor-supabase-DpMu9OXC.js";const me=()=>{const v=_(),w=R($),{showAlert:f}=q(),{showConfirm:k}=I(),s=!!w,{data:o=[],isLoading:x,error:r}=z({status:s?void 0:"published"}),[C]=O(),[L,{isLoading:u}]=G(),[h,p]=B.useState(!1),A=async(t,a)=>{k({title:"삭제 확인",message:`"${a}" 게시글을 정말 삭제하시겠습니까?`,type:"danger",confirmText:"삭제",cancelText:"취소",onConfirm:async()=>{try{await C(t).unwrap(),f({title:"완료",message:"게시글이 삭제되었습니다",type:"success"})}catch{f({title:"오류",message:"게시글 삭제에 실패했습니다",type:"error"})}}})},S=async(t,a)=>{if(t.stopPropagation(),!(u||h)){p(!0);try{await L(a).unwrap()}catch{console.error("좋아요 처리 실패")}finally{setTimeout(()=>{p(!1)},500)}}},j=t=>new Date(t).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),E=t=>{switch(t){case"published":return"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20";case"draft":return"bg-gray-500/10 text-gray-600 dark:text-gray-400 border-gray-500/20";case"archived":return"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20";default:return"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20"}},D=t=>{switch(t){case"published":return"발행됨";case"draft":return"임시저장";case"archived":return"보관됨";default:return t}};return e.jsxs(H,{children:[e.jsx(Q,{title:"게시글 목록 | Blog",description:"모든 블로그 게시글을 한눈에 확인하세요"}),e.jsx(l,{className:"py-20 bg-gradient-to-b from-accent/5 to-transparent dark:from-accent/10",children:e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6 mb-12",children:[e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-3 bg-gradient-to-r from-accent to-purple-500 bg-clip-text text-transparent",children:"게시글 목록"}),e.jsxs("p",{className:"text-muted-foreground text-lg",children:["전체 ",e.jsx("span",{className:"font-semibold text-accent",children:o.length}),"개의 게시글"]})]}),s&&e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(g,{to:y.BLOG_CREATE,children:e.jsxs(d,{size:"lg",className:"shadow-lg hover:shadow-xl transition-all group",children:[e.jsx(m,{className:"w-5 h-5 mr-2 group-hover:rotate-12 transition-transform"}),"새 게시글 작성"]})})})]})})}),x&&e.jsx(l,{className:"py-20",children:e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(K,{className:"w-10 h-10 animate-spin text-accent mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"게시글을 불러오는 중..."})]})})}),r&&e.jsx(l,{className:"py-20",children:e.jsx(c,{children:e.jsxs(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-6 rounded-xl bg-destructive/10 border border-destructive/30 text-center max-w-md mx-auto",children:[e.jsx(F,{className:"w-12 h-12 text-destructive mx-auto mb-3"}),e.jsx("p",{className:"font-medium text-destructive mb-1",children:"오류가 발생했습니다"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"data"in r?r.data?.message:"게시글을 불러올 수 없습니다"})]})})}),!x&&!r&&o.length===0&&e.jsx(l,{className:"py-20",children:e.jsx(c,{children:e.jsxs(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-20",children:[e.jsx("div",{className:"w-24 h-24 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(m,{className:"w-12 h-12 text-accent"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"게시글이 없습니다"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:s?"첫 번째 게시글을 작성해보세요!":"아직 작성된 게시글이 없습니다"}),s&&e.jsx(g,{to:y.BLOG_CREATE,children:e.jsxs(d,{size:"lg",variant:"outline",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),"첫 게시글 작성하기"]})})]})})}),!x&&!r&&o.length>0&&e.jsx(l,{className:"py-12",children:e.jsx(c,{children:e.jsx("div",{className:"space-y-6",children:o.map((t,a)=>{const M=new Date(t.publishedAt||t.createdAt),b=Math.floor((Date.now()-M.getTime())/(1e3*60*60*24)),P=b>=0&&b<=3;return e.jsxs(n.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},onClick:()=>v(N.blogDetail(t.id)),className:"group bg-card border border-border rounded-xl p-6 hover:border-accent/50 transition-all duration-300 hover:shadow-lg cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground group-hover:text-accent transition-colors",children:t.title}),P&&e.jsxs("span",{className:"relative flex h-2 w-2 shrink-0",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-fuchsia-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-fuchsia-600"})]})]}),s&&e.jsx(U,{variant:"outline",className:`${E(t.status)} px-3 py-1 text-xs font-semibold border shrink-0`,children:D(t.status)})]}),e.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-2 leading-relaxed",children:t.excerpt}),t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.tags.map((i,T)=>e.jsxs("span",{className:"px-3 py-1 bg-accent/10 text-accent rounded-full text-sm hover:bg-accent/20 transition-colors",children:["#",i]},T))}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:i=>S(i,t.id),disabled:u||h,className:`flex items-center gap-1.5 text-sm transition-colors ${t.is_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-red-500"} ${u||h?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(J,{className:`w-4 h-4 transition-all ${t.is_liked?"fill-current":""}`}),e.jsx("span",{className:"font-medium",children:t.likes_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:t.comments_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:t.views_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground ml-auto",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:t.status==="published"&&(t.publishedAt||t.published_at)?j(t.publishedAt||t.published_at||t.createdAt):j(t.createdAt||t.created_at||"")})]})]}),s&&e.jsxs("div",{className:"flex gap-2",onClick:i=>i.stopPropagation(),children:[e.jsx(g,{to:N.blogEdit(t.id),className:"flex-1",children:e.jsxs(d,{variant:"outline",size:"sm",className:"w-full group/btn",children:[e.jsx(m,{className:"w-4 h-4 mr-2 group-hover/btn:rotate-12 transition-transform"}),"수정"]})}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>A(t.id,t.title),className:"flex-1 text-destructive hover:text-destructive hover:bg-destructive/10 group/btn",children:[e.jsx(Y,{className:"w-4 h-4 mr-2 group-hover/btn:scale-110 transition-transform"}),"삭제"]})]})]})]},t.id)})})})})]})};export{me as default};
