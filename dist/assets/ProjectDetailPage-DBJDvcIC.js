import{j as e,m as O}from"./vendor-animation-DtZQNC6I.js";import{r as c,f as Z,h as ee}from"./vendor-react-DCKpLLFa.js";import{i as te,j as re,k as Y,l as Q,n as se,o as ae,p as ie,q as ne,r as oe,t as le,e as ce,f as de,g as pe,h as xe}from"./index-EmnU2dnG.js";import{M as H,S as ue}from"./SEO-C6FEOD3y.js";import{C as F,S as he}from"./section-CkoTUrwz.js";import{B as z}from"./button-C2B9ewyA.js";import{B as W}from"./badge-7zqvn2YO.js";import{C as T,a as M,b as R,c as A}from"./card-DA63gV5d.js";import{L as me,N as G,E as fe,H as K,M as ge,G as je,y as ye}from"./vendor-icons-coWQDWRu.js";import"./vendor-redux-CQqb5_oh.js";import"./vendor-supabase-DpMu9OXC.js";import"./Header-Dr8E-v62.js";const be=()=>{const t=te();return c.useCallback(a=>{t(re(a))},[t])},V=({projectId:t,parentId:i,editingComment:a,onSuccess:r,onCancel:s,placeholder:o="ëŒ“ê¸€ì„ ìž‘ì„±í•´ì£¼ì„¸ìš”...",autoFocus:l=!1})=>{const[n,b]=c.useState(""),[g,j]=c.useState(""),[v,y]=c.useState(""),[L,u]=c.useState(""),x=Y(Q),m=!!x,[p,{isLoading:f}]=se(),[E,{isLoading:N}]=ae(),h=f||N,I=!!a;c.useEffect(()=>{a&&b(a.content)},[a]);const D=()=>n.trim()?n.trim().length<2?(u("ëŒ“ê¸€ì€ ìµœì†Œ 2ìž ì´ìƒ ìž…ë ¥í•´ì£¼ì„¸ìš”."),!1):!m&&!g.trim()?(u("ì´ë¦„ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”."),!1):(u(""),!0):(u("ëŒ“ê¸€ ë‚´ìš©ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”."),!1),$=async k=>{if(k.preventDefault(),!!D())try{I?await E({id:a.id,content:n.trim()}).unwrap():await p({projectId:t,content:n.trim(),parentId:i,authorName:m?x.name:g.trim(),authorEmail:m?x.email:v.trim()||void 0}).unwrap(),b(""),j(""),y(""),u(""),r?.()}catch(w){const d=w&&typeof w=="object"&&"message"in w&&typeof w.message=="string"?w.message:"ëŒ“ê¸€ ìž‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";u(d)}},P=()=>{b(""),u(""),s?.()};return e.jsxs("form",{onSubmit:$,style:{display:"flex",flexDirection:"column",gap:"12px",padding:i?"12px":"16px",background:i?"var(--background-secondary)":"var(--background-primary)",borderRadius:"8px",border:i?"1px solid var(--border-color)":"none"},children:[!m&&!I&&e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:g,onChange:k=>j(k.target.value),placeholder:"ì´ë¦„ *",disabled:h,style:{flex:"1 1 200px",padding:"10px 14px",border:"1px solid var(--border-color)",borderRadius:"6px",fontSize:"14px",background:"var(--background-primary)",color:"var(--text-primary)"}}),e.jsx("input",{type:"email",value:v,onChange:k=>y(k.target.value),placeholder:"ì´ë©”ì¼ (ì„ íƒ)",disabled:h,style:{flex:"1 1 200px",padding:"10px 14px",border:"1px solid var(--border-color)",borderRadius:"6px",fontSize:"14px",background:"var(--background-primary)",color:"var(--text-primary)"}})]}),e.jsx("textarea",{value:n,onChange:k=>b(k.target.value),placeholder:o,autoFocus:l,disabled:h,rows:i?3:4,style:{padding:"12px 14px",border:"1px solid var(--border-color)",borderRadius:"6px",fontSize:"14px",lineHeight:"1.6",resize:"vertical",minHeight:"80px",background:"var(--background-primary)",color:"var(--text-primary)",fontFamily:"inherit"}}),L&&e.jsx("div",{style:{padding:"8px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid #ef4444",borderRadius:"6px",fontSize:"13px",color:"#ef4444"},children:L}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[(I||i||s)&&e.jsx("button",{type:"button",onClick:P,disabled:h,style:{padding:"8px 16px",border:"1px solid var(--border-color)",borderRadius:"6px",background:"transparent",color:"var(--text-secondary)",fontSize:"14px",cursor:h?"not-allowed":"pointer",opacity:h?.6:1},children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",disabled:h||!n.trim(),style:{padding:"8px 20px",border:"none",borderRadius:"6px",background:h||!n.trim()?"#9ca3af":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontSize:"14px",fontWeight:"500",cursor:h||!n.trim()?"not-allowed":"pointer",opacity:h||!n.trim()?.6:1},children:h?"ì „ì†¡ ì¤‘...":I?"ìˆ˜ì •":i?"ë‹µê¸€ ìž‘ì„±":"ëŒ“ê¸€ ìž‘ì„±"})]})]})},ve=t=>{const i=new Map;t.forEach(s=>{i.set(s.id,{...s,depth:0,replies:[]})});const a=[];t.forEach(s=>{const o=i.get(s.id);if(s.parentId){const l=i.get(s.parentId);l?(o.depth=l.depth+1,l.replies.push(o)):a.push(o)}else a.push(o)});const r=s=>{s.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),s.forEach(o=>{o.replies.length>0&&r(o.replies)})};return r(a),a},q=({comment:t,projectId:i,maxDepth:a=3})=>{const[r,s]=c.useState(!1),[o,l]=c.useState(!1),[n,b]=c.useState(!0),g=Y(Q),j=g&&g.id===t.userId,[v,{isLoading:y}]=ie(),[L]=ne(),[u]=oe(),x=`comment_liked_${t.id}`,[m,p]=c.useState(()=>localStorage.getItem(x)==="true"),[f,E]=c.useState(t.likes);c.useEffect(()=>{E(t.likes)},[t.likes]);const N=c.useRef(null),h=()=>{const d=!m;p(d),E(S=>d?S+1:Math.max(0,S-1)),d?localStorage.setItem(x,"true"):localStorage.removeItem(x),N.current&&clearTimeout(N.current),N.current=setTimeout(async()=>{try{d?await L(t.id).unwrap():await u(t.id).unwrap()}catch{p(!d),E(S=>d?Math.max(0,S-1):S+1),d?localStorage.removeItem(x):localStorage.setItem(x,"true")}},1e3)};c.useEffect(()=>()=>{N.current&&clearTimeout(N.current)},[]);const I=async()=>{if(confirm("ì •ë§ ì´ ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await v(t.id).unwrap()}catch{alert("ëŒ“ê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},D=()=>{s(!1),b(!0)},$=()=>{l(!1)},P=d=>{const S=new Date(d),J=new Date().getTime()-S.getTime(),X=Math.floor(J/1e3),U=Math.floor(X/60),_=Math.floor(U/60),B=Math.floor(_/24);return B>7?S.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):B>0?`${B}ì¼ ì „`:_>0?`${_}ì‹œê°„ ì „`:U>0?`${U}ë¶„ ì „`:"ë°©ê¸ˆ ì „"},k=t.depth*40,w=t.depth<a;return e.jsxs("div",{style:{marginLeft:`${k}px`,paddingTop:"16px",borderTop:t.depth===0?"1px solid var(--border-color)":"none"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:t.authorAvatar?`url(${t.authorAvatar})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"14px"},children:!t.authorAvatar&&t.authorName.charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)"},children:t.authorName}),e.jsx("span",{style:{fontSize:"12px",color:"var(--text-tertiary)"},children:P(t.createdAt)}),t.createdAt!==t.updatedAt&&e.jsx("span",{style:{fontSize:"11px",color:"var(--text-tertiary)",fontStyle:"italic"},children:"(ìˆ˜ì •ë¨)"})]}),o?e.jsx(V,{projectId:i,editingComment:t,onSuccess:$,onCancel:()=>l(!1),autoFocus:!0}):e.jsx("p",{style:{margin:"0 0 10px",fontSize:"14px",lineHeight:"1.6",color:"var(--text-primary)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t.content}),!o&&e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[e.jsxs("button",{onClick:h,style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",border:"none",background:"transparent",color:m?"#ef4444":"var(--text-secondary)",fontSize:"13px",cursor:"pointer",transition:"color 0.2s"},onMouseEnter:d=>{m||(d.currentTarget.style.color="#ef4444")},onMouseLeave:d=>{m||(d.currentTarget.style.color="var(--text-secondary)")},children:[e.jsx("span",{children:m||f>0?"â¤ï¸":"ðŸ¤"}),f>0&&e.jsx("span",{children:f})]}),w&&e.jsx("button",{onClick:()=>s(!r),style:{padding:"4px 8px",border:"none",background:"transparent",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:r?"ì·¨ì†Œ":"ë‹µê¸€"}),j&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(!0),style:{padding:"4px 8px",border:"none",background:"transparent",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:"ìˆ˜ì •"}),e.jsx("button",{onClick:I,disabled:y,style:{padding:"4px 8px",border:"none",background:"transparent",color:"#ef4444",fontSize:"13px",cursor:y?"not-allowed":"pointer",opacity:y?.6:1},children:y?"ì‚­ì œ ì¤‘...":"ì‚­ì œ"})]}),t.replies&&t.replies.length>0&&e.jsx("button",{onClick:()=>b(!n),style:{padding:"4px 8px",border:"none",background:"transparent",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:n?`ë‹µê¸€ ìˆ¨ê¸°ê¸° (${t.replies.length})`:`ë‹µê¸€ ë³´ê¸° (${t.replies.length})`})]}),r&&w&&e.jsx("div",{style:{marginTop:"12px"},children:e.jsx(V,{projectId:i,parentId:t.id,onSuccess:D,onCancel:()=>s(!1),placeholder:`@${t.authorName}ì—ê²Œ ë‹µê¸€...`,autoFocus:!0})})]})]}),n&&t.replies&&t.replies.length>0&&e.jsx("div",{children:t.replies.map(d=>e.jsx(q,{comment:d,projectId:i,maxDepth:a},d.id))})]})},ke=({projectId:t,maxDepth:i=3})=>{const{data:a,isLoading:r,error:s,refetch:o}=le(t);if(r)return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[[1,2,3].map(n=>e.jsxs("div",{style:{display:"flex",gap:"12px",padding:"16px 0",borderTop:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--background-secondary)",flexShrink:0,animation:"pulse 1.5s ease-in-out infinite"}}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("div",{style:{width:"30%",height:"14px",background:"var(--background-secondary)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"100%",height:"48px",background:"var(--background-secondary)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}})]})]},n)),e.jsx("style",{children:`
            @keyframes pulse {
              0%, 100% { opacity: 1; }
              50% { opacity: 0.5; }
            }
          `})]});if(s)return e.jsxs("div",{style:{padding:"32px",textAlign:"center",background:"rgba(239, 68, 68, 0.1)",border:"1px solid #ef4444",borderRadius:"12px"},children:[e.jsx("p",{style:{fontSize:"16px",color:"#ef4444",marginBottom:"12px"},children:"ëŒ“ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:()=>o(),style:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:"ë‹¤ì‹œ ì‹œë„"})]});if(!a||a.items.length===0)return e.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",background:"var(--background-secondary)",borderRadius:"12px"},children:[e.jsx("p",{style:{fontSize:"16px",color:"var(--text-secondary)",marginBottom:"8px"},children:"ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{style:{fontSize:"14px",color:"var(--text-tertiary)"},children:"ì²« ë²ˆì§¸ ëŒ“ê¸€ì„ ìž‘ì„±í•´ë³´ì„¸ìš”!"})]});const l=ve(a.items);return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",fontSize:"16px",fontWeight:"600",color:"var(--text-primary)"},children:["ëŒ“ê¸€ ",a.total,"ê°œ"]}),e.jsx("div",{children:l.map(n=>e.jsx(q,{comment:n,projectId:t,maxDepth:i},n.id))})]})},C=({children:t,delay:i=0,duration:a=.5,direction:r="up",distance:s=20,once:o=!0,...l})=>{const n=()=>{switch(r){case"up":return{y:s};case"down":return{y:-s};case"left":return{x:s};case"right":return{x:-s};case"none":return{};default:return{y:s}}};return e.jsx(O.div,{initial:{opacity:0,...n()},whileInView:{opacity:1,x:0,y:0},viewport:{once:o},transition:{duration:a,delay:i,ease:[.25,.4,.25,1]},...l,children:t})},we=({children:t,from:i="left",delay:a=0,duration:r=.6,distance:s=50,once:o=!0,...l})=>{const n=()=>{switch(i){case"left":return{x:-s,opacity:0};case"right":return{x:s,opacity:0};case"top":return{y:-s,opacity:0};case"bottom":return{y:s,opacity:0};default:return{x:-s,opacity:0}}};return e.jsx(O.div,{initial:n(),whileInView:{x:0,y:0,opacity:1},viewport:{once:o},transition:{duration:r,delay:a,ease:[.25,.46,.45,.94]},...l,children:t})},Pe=()=>{const{id:t}=Z(),i=ee(),a=be(),{data:r,isLoading:s,error:o}=ce(t),[l]=de(),[n]=pe(),[b]=xe(),g=`project_viewed_${t}`,j=`project_liked_${t}`,[v,y]=c.useState(()=>localStorage.getItem(j)==="true"),[L,u]=c.useState(0);c.useEffect(()=>{r&&u(r.stats.likes)},[r]);const x=c.useRef(null);c.useEffect(()=>{if(!r||!t)return;a({id:r.id,type:"project",title:r.title,path:`/projects/${r.id}`,thumbnail:r.thumbnail,description:r.description}),localStorage.getItem(g)||(l(t),localStorage.setItem(g,"true"))},[t,r,a,l,g]);const m=()=>{const p=!v;y(p),u(f=>p?f+1:Math.max(0,f-1)),p?localStorage.setItem(j,"true"):localStorage.removeItem(j),x.current&&clearTimeout(x.current),x.current=setTimeout(async()=>{try{p?await n(t).unwrap():await b(t).unwrap()}catch{y(!p),u(f=>p?Math.max(0,f-1):f+1),p?localStorage.removeItem(j):localStorage.setItem(j,"true")}},1e3)};return c.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]),s?e.jsx(H,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] py-20",children:[e.jsx(me,{className:"w-16 h-16 animate-spin text-primary mb-6"}),e.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"Loading project..."})]})}):o||!r?e.jsx(H,{children:e.jsx(F,{children:e.jsx(C,{children:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] py-20",children:e.jsx(T,{className:"max-w-xl text-center",children:e.jsxs(M,{className:"py-16 px-10",children:[e.jsx("p",{className:"text-4xl font-bold mb-6",children:"Project not found"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-10 leading-relaxed",children:"The project you're looking for doesn't exist or has been removed."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs(z,{variant:"outline",size:"lg",onClick:()=>i("/projects"),children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),"Back to Projects"]}),e.jsx(z,{variant:"gradient",size:"lg",onClick:()=>i("/"),children:"Go Home"})]})]})})})})})}):e.jsxs(H,{children:[e.jsx(ue,{title:`${r.title} | í”„ë¡œì íŠ¸ | ë³€ì„¸ë¯¼ í¬íŠ¸í´ë¦¬ì˜¤`,description:r.description,keywords:`${r.title}, ${r.techStack?.join(", ")}, í”„ë¡œì íŠ¸, í¬íŠ¸í´ë¦¬ì˜¤`,url:`https://semincode.com/projects/${r.id}`,image:r.thumbnail||void 0,type:"article",publishedTime:r.createdAt}),e.jsxs(F,{children:[e.jsx(C,{children:e.jsx("div",{className:"flex items-center justify-between py-8 border-b-2 border-border/50",children:e.jsx(z,{variant:"ghost",size:"md",leftIcon:e.jsx(G,{className:"w-5 h-5"}),onClick:()=>i(-1),children:"Back"})})}),e.jsxs(he,{children:[e.jsx(C,{direction:"up",delay:.1,children:e.jsxs("header",{className:"mb-12",children:[e.jsxs("div",{className:"mb-6",children:[r.featured&&e.jsx(W,{variant:"gradient",size:"lg",className:"mb-6 shadow-lg shadow-primary/50",children:"â­ Featured Project"}),e.jsx("h1",{className:"text-6xl md:text-7xl font-black mb-6 leading-tight tracking-tight",children:r.title}),e.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-4xl leading-relaxed",children:r.description})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-6 pt-6 border-t-2 border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-8 text-muted-foreground text-lg font-medium",children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(fe,{className:"w-6 h-6"}),r.stats.views]}),e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(K,{className:"w-6 h-6"}),L]}),e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(ge,{className:"w-6 h-6"}),r.stats.comments]})]}),e.jsx(z,{variant:v?"destructive":"gradient",size:"lg",onClick:m,leftIcon:e.jsx(K,{className:v?"fill-current w-5 h-5":"w-5 h-5"}),children:v?"Liked":"Like"})]})]})}),e.jsx(we,{from:"bottom",delay:.2,children:e.jsx("div",{className:"aspect-video rounded-3xl overflow-hidden mb-12 shadow-2xl shadow-primary/20 border-2 border-border/30",children:e.jsx("img",{src:r.thumbnail,alt:r.title,className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[e.jsx(C,{direction:"left",delay:.3,children:e.jsxs(T,{hover:!0,className:"h-full",children:[e.jsx(R,{children:e.jsx(A,{className:"text-3xl",children:"Tech Stack"})}),e.jsx(M,{className:"p-8 pt-0",children:e.jsx("div",{className:"flex flex-wrap gap-3",children:r.techStack.map(p=>e.jsx(W,{variant:"secondary",size:"lg",className:"text-base font-medium px-4 py-2",children:p},p))})})]})}),(r.githubUrl||r.liveUrl)&&e.jsx(C,{direction:"right",delay:.3,children:e.jsxs(T,{hover:!0,className:"h-full",children:[e.jsx(R,{children:e.jsx(A,{className:"text-3xl",children:"Links"})}),e.jsx(M,{className:"p-8 pt-0",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.githubUrl&&e.jsx("a",{href:r.githubUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx(z,{variant:"outline",size:"lg",leftIcon:e.jsx(je,{className:"w-5 h-5"}),children:"GitHub Repository"})}),r.liveUrl&&e.jsx("a",{href:r.liveUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx(z,{variant:"gradient",size:"lg",leftIcon:e.jsx(ye,{className:"w-5 h-5"}),children:"Live Demo"})})]})})]})})]}),e.jsx(C,{delay:.4,children:e.jsxs(T,{hover:!0,className:"mb-12",children:[e.jsx(R,{children:e.jsx(A,{className:"text-3xl",children:"Project Details"})}),e.jsx(M,{className:"p-8 pt-0",children:e.jsx("div",{className:"prose prose-invert prose-lg max-w-none leading-relaxed",dangerouslySetInnerHTML:{__html:r.content.replace(/\n/g,"<br />")}})})]})}),e.jsx(C,{delay:.5,children:e.jsxs(T,{hover:!0,children:[e.jsx(R,{children:e.jsx(A,{className:"text-3xl",children:"Comments"})}),e.jsxs(M,{className:"p-8 pt-0",children:[e.jsx("div",{className:"mb-8",children:e.jsx(V,{projectId:r.id})}),e.jsx(ke,{projectId:r.id,maxDepth:3})]})]})})]})]})]})};export{Pe as ProjectDetailPage,Pe as default};
