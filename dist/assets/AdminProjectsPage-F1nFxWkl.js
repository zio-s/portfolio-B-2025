import{j as i}from"./vendor-animation-B59SpM4f.js";import{r as c,R as U,i as Le}from"./vendor-react-DXenhPTK.js";import{A as zt}from"./AdminLayout-BSNQxmjO.js";import{X as zn,C as Oe,L as ht,a3 as Fn,a4 as Qt,a5 as gt,E as Zt,H as en,M as tn,a6 as nn,V as rn}from"./vendor-icons-DIcIA-PX.js";import{u as Un}from"./use-alert-modal-BYBLazQ-.js";import{u as $n}from"./Header-CIqEhRuS.js";import{u as Bn,U as Xn,V as Yn,W as Wn,X as Hn}from"./index-AbUhRBzW.js";import"./vendor-redux-BMNAMDLO.js";import"./vendor-supabase-wkgWRW20.js";function Vn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const nt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Se(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function wt(e){return"nodeType"in e}function $(e){var t,n;return e?Se(e)?e:wt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function yt(e){const{Document:t}=$(e);return e instanceof t}function Xe(e){return Se(e)?!1:e instanceof $(e).HTMLElement}function sn(e){return e instanceof $(e).SVGElement}function De(e){return e?Se(e)?e.document:wt(e)?yt(e)?e:Xe(e)||sn(e)?e.ownerDocument:document:document:document}const Z=nt?c.useLayoutEffect:c.useEffect;function Nt(e){const t=c.useRef(e);return Z(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Kn(){const e=c.useRef(null),t=c.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ue(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Z(()=>{n.current!==e&&(n.current=e)},t),n}function Ye(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Qe(e){const t=Nt(e),n=c.useRef(null),r=c.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function mt(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let lt={};function We(e,t){return c.useMemo(()=>{if(t)return t;const n=lt[e]==null?0:lt[e]+1;return lt[e]=n,e+"-"+n},[e,t])}function on(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,a)=>{const d=Object.entries(a);for(const[l,u]of d){const g=o[l];g!=null&&(o[l]=g+e*u)}return o},{...t})}}const Ne=on(1),$e=on(-1);function Gn(e){return"clientX"in e&&"clientY"in e}function Ct(e){if(!e)return!1;const{KeyboardEvent:t}=$(e.target);return t&&e instanceof t}function qn(e){if(!e)return!1;const{TouchEvent:t}=$(e.target);return t&&e instanceof t}function pt(e){if(qn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Gn(e)?{x:e.clientX,y:e.clientY}:null}const Ce=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ce.Translate.toString(e),Ce.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Ft="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Jn(e){return e.matches(Ft)?e:e.querySelector(Ft)}const _n={display:"none"};function Qn(e){let{id:t,value:n}=e;return U.createElement("div",{id:t,style:_n},n)}function Zn(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return U.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function er(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const an=c.createContext(null);function tr(e){const t=c.useContext(an);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function nr(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:s,event:o}=r;e.forEach(a=>{var d;return(d=a[s])==null?void 0:d.call(a,o)})},[e]),t]}const rr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},sr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function or(e){let{announcements:t=sr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=rr}=e;const{announce:o,announcement:a}=er(),d=We("DndLiveRegion"),[l,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),tr(c.useMemo(()=>({onDragStart(f){let{active:p}=f;o(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:m}=f;t.onDragMove&&o(t.onDragMove({active:p,over:m}))},onDragOver(f){let{active:p,over:m}=f;o(t.onDragOver({active:p,over:m}))},onDragEnd(f){let{active:p,over:m}=f;o(t.onDragEnd({active:p,over:m}))},onDragCancel(f){let{active:p,over:m}=f;o(t.onDragCancel({active:p,over:m}))}}),[o,t])),!l)return null;const g=U.createElement(U.Fragment,null,U.createElement(Qn,{id:r,value:s.draggable}),U.createElement(Zn,{id:d,announcement:a}));return n?Le.createPortal(g,n):g}var T;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(T||(T={}));function Ze(){}function Ut(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ir(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const q=Object.freeze({x:0,y:0});function cn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ln(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ar(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function $t(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function dn(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Bt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const cr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Bt(t,t.left,t.top),o=[];for(const a of r){const{id:d}=a,l=n.get(d);if(l){const u=cn(Bt(l),s);o.push({id:d,data:{droppableContainer:a,value:u}})}}return o.sort(ln)},lr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=$t(t),o=[];for(const a of r){const{id:d}=a,l=n.get(d);if(l){const u=$t(l),g=s.reduce((p,m,C)=>p+cn(u[C],m),0),f=Number((g/4).toFixed(4));o.push({id:d,data:{droppableContainer:a,value:f}})}}return o.sort(ln)};function dr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=s-r,d=o-n;if(r<s&&n<o){const l=t.width*t.height,u=e.width*e.height,g=a*d,f=g/(l+u-g);return Number(f.toFixed(4))}return 0}const ur=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:a}=o,d=n.get(a);if(d){const l=dr(d,t);l>0&&s.push({id:a,data:{droppableContainer:o,value:l}})}}return s.sort(ar)};function fr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function un(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:q}function hr(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((a,d)=>({...a,top:a.top+e*d.y,bottom:a.bottom+e*d.y,left:a.left+e*d.x,right:a.right+e*d.x}),{...n})}}const gr=hr(1);function mr(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function pr(e,t,n){const r=mr(t);if(!r)return e;const{scaleX:s,scaleY:o,x:a,y:d}=r,l=e.left-a-(1-s)*parseFloat(n),u=e.top-d-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),g=s?e.width/s:e.width,f=o?e.height/o:e.height;return{width:g,height:f,top:u,right:l+g,bottom:u+f,left:l}}const br={ignoreTransform:!1};function Re(e,t){t===void 0&&(t=br);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:g}=$(e).getComputedStyle(e);u&&(n=pr(n,u,g))}const{top:r,left:s,width:o,height:a,bottom:d,right:l}=n;return{top:r,left:s,width:o,height:a,bottom:d,right:l}}function Xt(e){return Re(e,{ignoreTransform:!0})}function vr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function xr(e,t){return t===void 0&&(t=$(e).getComputedStyle(e)),t.position==="fixed"}function wr(e,t){t===void 0&&(t=$(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function rt(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(yt(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Xe(s)||sn(s)||n.includes(s))return n;const o=$(e).getComputedStyle(s);return s!==e&&wr(s,o)&&n.push(s),xr(s,o)?n:r(s.parentNode)}return e?r(e):n}function fn(e){const[t]=rt(e,1);return t??null}function dt(e){return!nt||!e?null:Se(e)?e:wt(e)?yt(e)||e===De(e).scrollingElement?window:Xe(e)?e:null:null}function hn(e){return Se(e)?e.scrollX:e.scrollLeft}function gn(e){return Se(e)?e.scrollY:e.scrollTop}function bt(e){return{x:hn(e),y:gn(e)}}var O;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(O||(O={}));function mn(e){return!nt||!e?!1:e===document.scrollingElement}function pn(e){const t={x:0,y:0},n=mn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,d=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:a,isRight:d,maxScroll:r,minScroll:t}}const yr={x:.2,y:.2};function Nr(e,t,n,r,s){let{top:o,left:a,right:d,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=yr);const{isTop:u,isBottom:g,isLeft:f,isRight:p}=pn(e),m={x:0,y:0},C={x:0,y:0},b={height:t.height*s.y,width:t.width*s.x};return!u&&o<=t.top+b.height?(m.y=O.Backward,C.y=r*Math.abs((t.top+b.height-o)/b.height)):!g&&l>=t.bottom-b.height&&(m.y=O.Forward,C.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!p&&d>=t.right-b.width?(m.x=O.Forward,C.x=r*Math.abs((t.right-b.width-d)/b.width)):!f&&a<=t.left+b.width&&(m.x=O.Backward,C.x=r*Math.abs((t.left+b.width-a)/b.width)),{direction:m,speed:C}}function Cr(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function bn(e){return e.reduce((t,n)=>Ne(t,bt(n)),q)}function Sr(e){return e.reduce((t,n)=>t+hn(n),0)}function Dr(e){return e.reduce((t,n)=>t+gn(n),0)}function Rr(e,t){if(t===void 0&&(t=Re),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);fn(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const jr=[["x",["left","right"],Sr],["y",["top","bottom"],Dr]];class St{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=rt(n),s=bn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,a,d]of jr)for(const l of a)Object.defineProperty(this,l,{get:()=>{const u=d(r),g=s[o]-u;return this.rect[l]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Pe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Er(e){const{EventTarget:t}=$(e);return e instanceof t?e:De(e)}function ut(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var G;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(G||(G={}));function Yt(e){e.preventDefault()}function Mr(e){e.stopPropagation()}var j;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(j||(j={}));const vn={start:[j.Space,j.Enter],cancel:[j.Esc],end:[j.Space,j.Enter,j.Tab]},kr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case j.Right:return{...n,x:n.x+25};case j.Left:return{...n,x:n.x-25};case j.Down:return{...n,y:n.y+25};case j.Up:return{...n,y:n.y-25}}};class Dt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Pe(De(n)),this.windowListeners=new Pe($(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(G.Resize,this.handleCancel),this.windowListeners.add(G.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(G.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Rr(r),n(q)}handleKeyDown(t){if(Ct(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=vn,coordinateGetter:a=kr,scrollBehavior:d="smooth"}=s,{code:l}=t;if(o.end.includes(l)){this.handleEnd(t);return}if(o.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,g=u?{x:u.left,y:u.top}:q;this.referenceCoordinates||(this.referenceCoordinates=g);const f=a(t,{active:n,context:r.current,currentCoordinates:g});if(f){const p=$e(f,g),m={x:0,y:0},{scrollableAncestors:C}=r.current;for(const b of C){const h=t.code,{isTop:x,isRight:v,isLeft:w,isBottom:S,maxScroll:E,minScroll:M}=pn(b),y=Cr(b),D={x:Math.min(h===j.Right?y.right-y.width/2:y.right,Math.max(h===j.Right?y.left:y.left+y.width/2,f.x)),y:Math.min(h===j.Down?y.bottom-y.height/2:y.bottom,Math.max(h===j.Down?y.top:y.top+y.height/2,f.y))},I=h===j.Right&&!v||h===j.Left&&!w,N=h===j.Down&&!S||h===j.Up&&!x;if(I&&D.x!==f.x){const R=b.scrollLeft+p.x,z=h===j.Right&&R<=E.x||h===j.Left&&R>=M.x;if(z&&!p.y){b.scrollTo({left:R,behavior:d});return}z?m.x=b.scrollLeft-R:m.x=h===j.Right?b.scrollLeft-E.x:b.scrollLeft-M.x,m.x&&b.scrollBy({left:-m.x,behavior:d});break}else if(N&&D.y!==f.y){const R=b.scrollTop+p.y,z=h===j.Down&&R<=E.y||h===j.Up&&R>=M.y;if(z&&!p.x){b.scrollTo({top:R,behavior:d});return}z?m.y=b.scrollTop-R:m.y=h===j.Down?b.scrollTop-E.y:b.scrollTop-M.y,m.y&&b.scrollBy({top:-m.y,behavior:d});break}}this.handleMove(t,Ne($e(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=vn,onActivation:s}=t,{active:o}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const d=o.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function Wt(e){return!!(e&&"distance"in e)}function Ht(e){return!!(e&&"delay"in e)}class Rt{constructor(t,n,r){var s;r===void 0&&(r=Er(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:a}=o;this.props=t,this.events=n,this.document=De(a),this.documentListeners=new Pe(this.document),this.listeners=new Pe(r),this.windowListeners=new Pe($(a)),this.initialCoordinates=(s=pt(o))!=null?s:q,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(G.Resize,this.handleCancel),this.windowListeners.add(G.DragStart,Yt),this.windowListeners.add(G.VisibilityChange,this.handleCancel),this.windowListeners.add(G.ContextMenu,Yt),this.documentListeners.add(G.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ht(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Wt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(G.Click,Mr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(G.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:a,options:{activationConstraint:d}}=o;if(!s)return;const l=(n=pt(t))!=null?n:q,u=$e(s,l);if(!r&&d){if(Wt(d)){if(d.tolerance!=null&&ut(u,d.tolerance))return this.handleCancel();if(ut(u,d.distance))return this.handleStart()}if(Ht(d)&&ut(u,d.tolerance))return this.handleCancel();this.handlePending(d,u);return}t.cancelable&&t.preventDefault(),a(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===j.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ir={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class jt extends Rt{constructor(t){const{event:n}=t,r=De(n.target);super(t,Ir,r)}}jt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Ar={move:{name:"mousemove"},end:{name:"mouseup"}};var vt;(function(e){e[e.RightClick=2]="RightClick"})(vt||(vt={}));class Tr extends Rt{constructor(t){super(t,Ar,De(t.event.target))}}Tr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===vt.RightClick?!1:(r?.({event:n}),!0)}}];const ft={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Or extends Rt{constructor(t){super(t,ft)}static setup(){return window.addEventListener(ft.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ft.move.name,t)};function t(){}}}Or.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var ze;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(ze||(ze={}));var et;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(et||(et={}));function Lr(e){let{acceleration:t,activator:n=ze.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:a=5,order:d=et.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:g,delta:f,threshold:p}=e;const m=zr({delta:f,disabled:!o}),[C,b]=Kn(),h=c.useRef({x:0,y:0}),x=c.useRef({x:0,y:0}),v=c.useMemo(()=>{switch(n){case ze.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case ze.DraggableRect:return s}},[n,s,l]),w=c.useRef(null),S=c.useCallback(()=>{const M=w.current;if(!M)return;const y=h.current.x*x.current.x,D=h.current.y*x.current.y;M.scrollBy(y,D)},[]),E=c.useMemo(()=>d===et.TreeOrder?[...u].reverse():u,[d,u]);c.useEffect(()=>{if(!o||!u.length||!v){b();return}for(const M of E){if(r?.(M)===!1)continue;const y=u.indexOf(M),D=g[y];if(!D)continue;const{direction:I,speed:N}=Nr(M,D,v,t,p);for(const R of["x","y"])m[R][I[R]]||(N[R]=0,I[R]=0);if(N.x>0||N.y>0){b(),w.current=M,C(S,a),h.current=N,x.current=I;return}}h.current={x:0,y:0},x.current={x:0,y:0},b()},[t,S,r,b,o,a,JSON.stringify(v),JSON.stringify(m),C,u,E,g,JSON.stringify(p)])}const Pr={x:{[O.Backward]:!1,[O.Forward]:!1},y:{[O.Backward]:!1,[O.Forward]:!1}};function zr(e){let{delta:t,disabled:n}=e;const r=mt(t);return Ye(s=>{if(n||!r||!s)return Pr;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[O.Backward]:s.x[O.Backward]||o.x===-1,[O.Forward]:s.x[O.Forward]||o.x===1},y:{[O.Backward]:s.y[O.Backward]||o.y===-1,[O.Forward]:s.y[O.Forward]||o.y===1}}},[n,t,r])}function Fr(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ye(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function Ur(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...o]},[]),[e,t])}var Be;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Be||(Be={}));var xt;(function(e){e.Optimized="optimized"})(xt||(xt={}));const Vt=new Map;function $r(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,a]=c.useState(null),{frequency:d,measure:l,strategy:u}=s,g=c.useRef(e),f=h(),p=Ue(f),m=c.useCallback(function(x){x===void 0&&(x=[]),!p.current&&a(v=>v===null?x:v.concat(x.filter(w=>!v.includes(w))))},[p]),C=c.useRef(null),b=Ye(x=>{if(f&&!n)return Vt;if(!x||x===Vt||g.current!==e||o!=null){const v=new Map;for(let w of e){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){v.set(w.id,w.rect.current);continue}const S=w.node.current,E=S?new St(l(S),S):null;w.rect.current=E,E&&v.set(w.id,E)}return v}return x},[e,o,n,f,l]);return c.useEffect(()=>{g.current=e},[e]),c.useEffect(()=>{f||m()},[n,f]),c.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),c.useEffect(()=>{f||typeof d!="number"||C.current!==null||(C.current=setTimeout(()=>{m(),C.current=null},d))},[d,f,m,...r]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:o!=null};function h(){switch(u){case Be.Always:return!1;case Be.BeforeDragging:return n;default:return!n}}}function xn(e,t){return Ye(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Br(e,t){return xn(e,t)}function Xr(e){let{callback:t,disabled:n}=e;const r=Nt(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return c.useEffect(()=>()=>s?.disconnect(),[s]),s}function st(e){let{callback:t,disabled:n}=e;const r=Nt(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return c.useEffect(()=>()=>s?.disconnect(),[s]),s}function Yr(e){return new St(Re(e),e)}function Kt(e,t,n){t===void 0&&(t=Yr);const[r,s]=c.useState(null);function o(){s(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const g=t(e);return JSON.stringify(l)===JSON.stringify(g)?l:g})}const a=Xr({callback(l){if(e)for(const u of l){const{type:g,target:f}=u;if(g==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),d=st({callback:o});return Z(()=>{o(),e?(d?.observe(e),a?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),a?.disconnect())},[e]),r}function Wr(e){const t=xn(e);return un(e,t)}const Gt=[];function Hr(e){const t=c.useRef(e),n=Ye(r=>e?r&&r!==Gt&&e&&t.current&&e.parentNode===t.current.parentNode?r:rt(e):Gt,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Vr(e){const[t,n]=c.useState(null),r=c.useRef(e),s=c.useCallback(o=>{const a=dt(o.target);a&&n(d=>d?(d.set(a,bt(a)),new Map(d)):null)},[]);return c.useEffect(()=>{const o=r.current;if(e!==o){a(o);const d=e.map(l=>{const u=dt(l);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,bt(u)]):null}).filter(l=>l!=null);n(d.length?new Map(d):null),r.current=e}return()=>{a(e),a(o)};function a(d){d.forEach(l=>{const u=dt(l);u?.removeEventListener("scroll",s)})}},[s,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,a)=>Ne(o,a),q):bn(e):q,[e,t])}function qt(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==q;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?$e(e,n.current):q}function Kr(e){c.useEffect(()=>{if(!nt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Gr(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=a=>{o(a,t)},n},{}),[e,t])}function wn(e){return c.useMemo(()=>e?vr(e):null,[e])}const Jt=[];function qr(e,t){t===void 0&&(t=Re);const[n]=e,r=wn(n?$(n):null),[s,o]=c.useState(Jt);function a(){o(()=>e.length?e.map(l=>mn(l)?r:new St(t(l),l)):Jt)}const d=st({callback:a});return Z(()=>{d?.disconnect(),a(),e.forEach(l=>d?.observe(l))},[e]),s}function Jr(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Xe(t)?t:e}function _r(e){let{measure:t}=e;const[n,r]=c.useState(null),s=c.useCallback(u=>{for(const{target:g}of u)if(Xe(g)){r(f=>{const p=t(g);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),o=st({callback:s}),a=c.useCallback(u=>{const g=Jr(u);o?.disconnect(),g&&o?.observe(g),r(g?t(g):null)},[t,o]),[d,l]=Qe(a);return c.useMemo(()=>({nodeRef:d,rect:n,setRef:l}),[n,d,l])}const Qr=[{sensor:jt,options:{}},{sensor:Dt,options:{}}],Zr={current:{}},_e={draggable:{measure:Xt},droppable:{measure:Xt,strategy:Be.WhileDragging,frequency:xt.Optimized},dragOverlay:{measure:Re}};class Fe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const es={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Fe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ze},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:_e,measureDroppableContainers:Ze,windowRect:null,measuringScheduled:!1},ts={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ze,draggableNodes:new Map,over:null,measureDroppableContainers:Ze},ot=c.createContext(ts),yn=c.createContext(es);function ns(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Fe}}}function rs(e,t){switch(t.type){case T.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case T.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case T.DragEnd:case T.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case T.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Fe(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case T.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Fe(e.droppable.containers);return a.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case T.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Fe(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function ss(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=c.useContext(ot),o=mt(r),a=mt(n?.id);return c.useEffect(()=>{if(!t&&!r&&o&&a!=null){if(!Ct(o)||document.activeElement===o.target)return;const d=s.get(a);if(!d)return;const{activatorNode:l,node:u}=d;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const g of[l.current,u.current]){if(!g)continue;const f=Jn(g);if(f){f.focus();break}}})}},[r,t,s,a,o]),null}function os(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function is(e){return c.useMemo(()=>({draggable:{..._e.draggable,...e?.draggable},droppable:{..._e.droppable,...e?.droppable},dragOverlay:{..._e.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function as(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=c.useRef(!1),{x:a,y:d}=typeof s=="boolean"?{x:s,y:s}:s;Z(()=>{if(!a&&!d||!t){o.current=!1;return}if(o.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const g=n(u),f=un(g,r);if(a||(f.x=0),d||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=fn(u);p&&p.scrollBy({top:f.y,left:f.x})}},[t,a,d,r,n])}const Nn=c.createContext({...q,scaleX:1,scaleY:1});var fe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(fe||(fe={}));const cs=c.memo(function(t){var n,r,s,o;let{id:a,accessibility:d,autoScroll:l=!0,children:u,sensors:g=Qr,collisionDetection:f=ur,measuring:p,modifiers:m,...C}=t;const b=c.useReducer(rs,void 0,ns),[h,x]=b,[v,w]=nr(),[S,E]=c.useState(fe.Uninitialized),M=S===fe.Initialized,{draggable:{active:y,nodes:D,translate:I},droppable:{containers:N}}=h,R=y!=null?D.get(y):null,z=c.useRef({initial:null,translated:null}),B=c.useMemo(()=>{var P;return y!=null?{id:y,data:(P=R?.data)!=null?P:Zr,rect:z}:null},[y,R]),H=c.useRef(null),[oe,ge]=c.useState(null),[A,me]=c.useState(null),ee=Ue(C,Object.values(C)),je=We("DndDescribedBy",a),He=c.useMemo(()=>N.getEnabled(),[N]),F=is(p),{droppableRects:te,measureDroppableContainers:he,measuringScheduled:Ee}=$r(He,{dragging:M,dependencies:[I.x,I.y],config:F.droppable}),V=Fr(D,y),Ve=c.useMemo(()=>A?pt(A):null,[A]),ie=Pn(),ne=Br(V,F.draggable.measure);as({activeNode:y!=null?D.get(y):null,config:ie.layoutShiftCompensation,initialRect:ne,measure:F.draggable.measure});const k=Kt(V,F.draggable.measure,ne),Me=Kt(V?V.parentElement:null),J=c.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:te,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),pe=N.getNodeFor((n=J.current.over)==null?void 0:n.id),re=_r({measure:F.dragOverlay.measure}),be=(r=re.nodeRef.current)!=null?r:V,ve=M?(s=re.rect)!=null?s:k:null,Mt=!!(re.nodeRef.current&&re.rect),kt=Wr(Mt?null:k),it=wn(be?$(be):null),ae=Hr(M?pe??V:null),Ke=qr(ae),Ge=os(m,{transform:{x:I.x-kt.x,y:I.y-kt.y,scaleX:1,scaleY:1},activatorEvent:A,active:B,activeNodeRect:k,containerNodeRect:Me,draggingNodeRect:ve,over:J.current.over,overlayNodeRect:re.rect,scrollableAncestors:ae,scrollableAncestorRects:Ke,windowRect:it}),It=Ve?Ne(Ve,I):null,At=Vr(ae),Mn=qt(At),kn=qt(At,[k]),xe=Ne(Ge,Mn),we=ve?gr(ve,Ge):null,ke=B&&we?f({active:B,collisionRect:we,droppableRects:te,droppableContainers:He,pointerCoordinates:It}):null,Tt=dn(ke,"id"),[ce,Ot]=c.useState(null),In=Mt?Ge:Ne(Ge,kn),An=fr(In,(o=ce?.rect)!=null?o:null,k),at=c.useRef(null),Lt=c.useCallback((P,X)=>{let{sensor:Y,options:le}=X;if(H.current==null)return;const K=D.get(H.current);if(!K)return;const W=P.nativeEvent,_=new Y({active:H.current,activeNode:K,event:W,options:le,context:J,onAbort(L){if(!D.get(L))return;const{onDragAbort:Q}=ee.current,se={id:L};Q?.(se),v({type:"onDragAbort",event:se})},onPending(L,de,Q,se){if(!D.get(L))return;const{onDragPending:Ae}=ee.current,ue={id:L,constraint:de,initialCoordinates:Q,offset:se};Ae?.(ue),v({type:"onDragPending",event:ue})},onStart(L){const de=H.current;if(de==null)return;const Q=D.get(de);if(!Q)return;const{onDragStart:se}=ee.current,Ie={activatorEvent:W,active:{id:de,data:Q.data,rect:z}};Le.unstable_batchedUpdates(()=>{se?.(Ie),E(fe.Initializing),x({type:T.DragStart,initialCoordinates:L,active:de}),v({type:"onDragStart",event:Ie}),ge(at.current),me(W)})},onMove(L){x({type:T.DragMove,coordinates:L})},onEnd:ye(T.DragEnd),onCancel:ye(T.DragCancel)});at.current=_;function ye(L){return async function(){const{active:Q,collisions:se,over:Ie,scrollAdjustedTranslate:Ae}=J.current;let ue=null;if(Q&&Ae){const{cancelDrop:Te}=ee.current;ue={activatorEvent:W,active:Q,collisions:se,delta:Ae,over:Ie},L===T.DragEnd&&typeof Te=="function"&&await Promise.resolve(Te(ue))&&(L=T.DragCancel)}H.current=null,Le.unstable_batchedUpdates(()=>{x({type:L}),E(fe.Uninitialized),Ot(null),ge(null),me(null),at.current=null;const Te=L===T.DragEnd?"onDragEnd":"onDragCancel";if(ue){const ct=ee.current[Te];ct?.(ue),v({type:Te,event:ue})}})}}},[D]),Tn=c.useCallback((P,X)=>(Y,le)=>{const K=Y.nativeEvent,W=D.get(le);if(H.current!==null||!W||K.dndKit||K.defaultPrevented)return;const _={active:W};P(Y,X.options,_)===!0&&(K.dndKit={capturedBy:X.sensor},H.current=le,Lt(Y,X))},[D,Lt]),Pt=Ur(g,Tn);Kr(g),Z(()=>{k&&S===fe.Initializing&&E(fe.Initialized)},[k,S]),c.useEffect(()=>{const{onDragMove:P}=ee.current,{active:X,activatorEvent:Y,collisions:le,over:K}=J.current;if(!X||!Y)return;const W={active:X,activatorEvent:Y,collisions:le,delta:{x:xe.x,y:xe.y},over:K};Le.unstable_batchedUpdates(()=>{P?.(W),v({type:"onDragMove",event:W})})},[xe.x,xe.y]),c.useEffect(()=>{const{active:P,activatorEvent:X,collisions:Y,droppableContainers:le,scrollAdjustedTranslate:K}=J.current;if(!P||H.current==null||!X||!K)return;const{onDragOver:W}=ee.current,_=le.get(Tt),ye=_&&_.rect.current?{id:_.id,rect:_.rect.current,data:_.data,disabled:_.disabled}:null,L={active:P,activatorEvent:X,collisions:Y,delta:{x:K.x,y:K.y},over:ye};Le.unstable_batchedUpdates(()=>{Ot(ye),W?.(L),v({type:"onDragOver",event:L})})},[Tt]),Z(()=>{J.current={activatorEvent:A,active:B,activeNode:V,collisionRect:we,collisions:ke,droppableRects:te,draggableNodes:D,draggingNode:be,draggingNodeRect:ve,droppableContainers:N,over:ce,scrollableAncestors:ae,scrollAdjustedTranslate:xe},z.current={initial:ve,translated:we}},[B,V,ke,we,D,be,ve,te,N,ce,ae,xe]),Lr({...ie,delta:I,draggingRect:we,pointerCoordinates:It,scrollableAncestors:ae,scrollableAncestorRects:Ke});const On=c.useMemo(()=>({active:B,activeNode:V,activeNodeRect:k,activatorEvent:A,collisions:ke,containerNodeRect:Me,dragOverlay:re,draggableNodes:D,droppableContainers:N,droppableRects:te,over:ce,measureDroppableContainers:he,scrollableAncestors:ae,scrollableAncestorRects:Ke,measuringConfiguration:F,measuringScheduled:Ee,windowRect:it}),[B,V,k,A,ke,Me,re,D,N,te,ce,he,ae,Ke,F,Ee,it]),Ln=c.useMemo(()=>({activatorEvent:A,activators:Pt,active:B,activeNodeRect:k,ariaDescribedById:{draggable:je},dispatch:x,draggableNodes:D,over:ce,measureDroppableContainers:he}),[A,Pt,B,k,x,je,D,ce,he]);return U.createElement(an.Provider,{value:w},U.createElement(ot.Provider,{value:Ln},U.createElement(yn.Provider,{value:On},U.createElement(Nn.Provider,{value:An},u)),U.createElement(ss,{disabled:d?.restoreFocus===!1})),U.createElement(or,{...d,hiddenTextDescribedById:je}));function Pn(){const P=oe?.autoScrollEnabled===!1,X=typeof l=="object"?l.enabled===!1:l===!1,Y=M&&!P&&!X;return typeof l=="object"?{...l,enabled:Y}:{enabled:Y}}}),ls=c.createContext(null),_t="button",ds="Draggable";function us(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=We(ds),{activators:a,activatorEvent:d,active:l,activeNodeRect:u,ariaDescribedById:g,draggableNodes:f,over:p}=c.useContext(ot),{role:m=_t,roleDescription:C="draggable",tabIndex:b=0}=s??{},h=l?.id===t,x=c.useContext(h?Nn:ls),[v,w]=Qe(),[S,E]=Qe(),M=Gr(a,t),y=Ue(n);Z(()=>(f.set(t,{id:t,key:o,node:v,activatorNode:S,data:y}),()=>{const I=f.get(t);I&&I.key===o&&f.delete(t)}),[f,t]);const D=c.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":r,"aria-pressed":h&&m===_t?!0:void 0,"aria-roledescription":C,"aria-describedby":g.draggable}),[r,m,b,h,C,g.draggable]);return{active:l,activatorEvent:d,activeNodeRect:u,attributes:D,isDragging:h,listeners:r?void 0:M,node:v,over:p,setNodeRef:w,setActivatorNodeRef:E,transform:x}}function fs(){return c.useContext(yn)}const hs="Droppable",gs={timeout:25};function ms(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=We(hs),{active:a,dispatch:d,over:l,measureDroppableContainers:u}=c.useContext(ot),g=c.useRef({disabled:n}),f=c.useRef(!1),p=c.useRef(null),m=c.useRef(null),{disabled:C,updateMeasurementsFor:b,timeout:h}={...gs,...s},x=Ue(b??r),v=c.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),m.current=null},h)},[h]),w=st({callback:v,disabled:C||!a}),S=c.useCallback((D,I)=>{w&&(I&&(w.unobserve(I),f.current=!1),D&&w.observe(D))},[w]),[E,M]=Qe(S),y=Ue(t);return c.useEffect(()=>{!w||!E.current||(w.disconnect(),f.current=!1,w.observe(E.current))},[E,w]),c.useEffect(()=>(d({type:T.RegisterDroppable,element:{id:r,key:o,disabled:n,node:E,rect:p,data:y}}),()=>d({type:T.UnregisterDroppable,key:o,id:r})),[r]),c.useEffect(()=>{n!==g.current.disabled&&(d({type:T.SetDroppableDisabled,id:r,key:o,disabled:n}),g.current.disabled=n)},[r,o,n,d]),{active:a,rect:p,isOver:l?.id===r,node:E,over:l,setNodeRef:M}}function Et(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ps(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function qe(e){return e!==null&&e>=0}function bs(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function vs(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Cn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=Et(t,r,n),a=t[s],d=o[s];return!d||!a?null:{x:d.left-a.left,y:d.top-a.top,scaleX:d.width/a.width,scaleY:d.height/a.height}},Je={scaleX:1,scaleY:1},xs=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:a}=e;const d=(t=o[n])!=null?t:r;if(!d)return null;if(s===n){const u=o[a];return u?{x:0,y:n<a?u.top+u.height-(d.top+d.height):u.top-d.top,...Je}:null}const l=ws(o,s,n);return s>n&&s<=a?{x:0,y:-d.height-l,...Je}:s<n&&s>=a?{x:0,y:d.height+l,...Je}:{x:0,y:0,...Je}};function ws(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Sn="Sortable",Dn=U.createContext({activeIndex:-1,containerId:Sn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Cn,disabled:{draggable:!1,droppable:!1}});function ys(e){let{children:t,id:n,items:r,strategy:s=Cn,disabled:o=!1}=e;const{active:a,dragOverlay:d,droppableRects:l,over:u,measureDroppableContainers:g}=fs(),f=We(Sn,n),p=d.rect!==null,m=c.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),C=a!=null,b=a?m.indexOf(a.id):-1,h=u?m.indexOf(u.id):-1,x=c.useRef(m),v=!bs(m,x.current),w=h!==-1&&b===-1||v,S=vs(o);Z(()=>{v&&C&&g(m)},[v,m,C,g]),c.useEffect(()=>{x.current=m},[m]);const E=c.useMemo(()=>({activeIndex:b,containerId:f,disabled:S,disableTransforms:w,items:m,overIndex:h,useDragOverlay:p,sortedRects:ps(m,l),strategy:s}),[b,f,S.draggable,S.droppable,w,m,h,l,p,s]);return U.createElement(Dn.Provider,{value:E},t)}const Ns=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Et(n,r,s).indexOf(t)},Cs=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:a,previousItems:d,previousContainerId:l,transition:u}=e;return!u||!r||d!==o&&s===a?!1:n?!0:a!==s&&t===l},Ss={duration:200,easing:"ease"},Rn="transform",Ds=Ce.Transition.toString({property:Rn,duration:0,easing:"linear"}),Rs={roleDescription:"sortable"};function js(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,a]=c.useState(null),d=c.useRef(n);return Z(()=>{if(!t&&n!==d.current&&r.current){const l=s.current;if(l){const u=Re(r.current,{ignoreTransform:!0}),g={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(g.x||g.y)&&a(g)}}n!==d.current&&(d.current=n)},[t,n,r,s]),c.useEffect(()=>{o&&a(null)},[o]),o}function jn(e){let{animateLayoutChanges:t=Cs,attributes:n,disabled:r,data:s,getNewIndex:o=Ns,id:a,strategy:d,resizeObserverConfig:l,transition:u=Ss}=e;const{items:g,containerId:f,activeIndex:p,disabled:m,disableTransforms:C,sortedRects:b,overIndex:h,useDragOverlay:x,strategy:v}=c.useContext(Dn),w=Es(r,m),S=g.indexOf(a),E=c.useMemo(()=>({sortable:{containerId:f,index:S,items:g},...s}),[f,s,S,g]),M=c.useMemo(()=>g.slice(g.indexOf(a)),[g,a]),{rect:y,node:D,isOver:I,setNodeRef:N}=ms({id:a,data:E,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...l}}),{active:R,activatorEvent:z,activeNodeRect:B,attributes:H,setNodeRef:oe,listeners:ge,isDragging:A,over:me,setActivatorNodeRef:ee,transform:je}=us({id:a,data:E,attributes:{...Rs,...n},disabled:w.draggable}),He=Vn(N,oe),F=!!R,te=F&&!C&&qe(p)&&qe(h),he=!x&&A,Ee=he&&te?je:null,Ve=te?Ee??(d??v)({rects:b,activeNodeRect:B,activeIndex:p,overIndex:h,index:S}):null,ie=qe(p)&&qe(h)?o({id:a,items:g,activeIndex:p,overIndex:h}):S,ne=R?.id,k=c.useRef({activeId:ne,items:g,newIndex:ie,containerId:f}),Me=g!==k.current.items,J=t({active:R,containerId:f,isDragging:A,isSorting:F,id:a,index:S,items:g,newIndex:k.current.newIndex,previousItems:k.current.items,previousContainerId:k.current.containerId,transition:u,wasDragging:k.current.activeId!=null}),pe=js({disabled:!J,index:S,node:D,rect:y});return c.useEffect(()=>{F&&k.current.newIndex!==ie&&(k.current.newIndex=ie),f!==k.current.containerId&&(k.current.containerId=f),g!==k.current.items&&(k.current.items=g)},[F,ie,f,g]),c.useEffect(()=>{if(ne===k.current.activeId)return;if(ne!=null&&k.current.activeId==null){k.current.activeId=ne;return}const be=setTimeout(()=>{k.current.activeId=ne},50);return()=>clearTimeout(be)},[ne]),{active:R,activeIndex:p,attributes:H,data:E,rect:y,index:S,newIndex:ie,items:g,isOver:I,isSorting:F,isDragging:A,listeners:ge,node:D,overIndex:h,over:me,setNodeRef:He,setActivatorNodeRef:ee,setDroppableNodeRef:N,setDraggableNodeRef:oe,transform:pe??Ve,transition:re()};function re(){if(pe||Me&&k.current.newIndex===S)return Ds;if(!(he&&!Ct(z)||!u)&&(F||J))return Ce.Transition.toString({...u,property:Rn})}}function Es(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function tt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Ms=[j.Down,j.Right,j.Up,j.Left],ks=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:a,scrollableAncestors:d}}=t;if(Ms.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];o.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=s.get(f.id);if(p)switch(e.code){case j.Down:r.top<p.top&&l.push(f);break;case j.Up:r.top>p.top&&l.push(f);break;case j.Left:r.left>p.left&&l.push(f);break;case j.Right:r.left<p.left&&l.push(f);break}});const u=lr({collisionRect:r,droppableRects:s,droppableContainers:l});let g=dn(u,"id");if(g===a?.id&&u.length>1&&(g=u[1].id),g!=null){const f=o.get(n.id),p=o.get(g),m=p?s.get(p.id):null,C=p?.node.current;if(C&&m&&f&&p){const h=rt(C).some((M,y)=>d[y]!==M),x=En(f,p),v=Is(f,p),w=h||!x?{x:0,y:0}:{x:v?r.width-m.width:0,y:v?r.height-m.height:0},S={x:m.left,y:m.top};return w.x&&w.y?S:$e(S,w)}}}};function En(e,t){return!tt(e)||!tt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Is(e,t){return!tt(e)||!tt(t)||!En(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const As=({project:e,onSubmit:t,onCancel:n,isOpen:r})=>{const[s,o]=c.useState({title:"",description:"",content:"",thumbnail:"",images:"",techStack:"",category:"web",tags:"",githubUrl:"",liveUrl:"",status:"public",featured:!1}),[a,d]=c.useState(!1),[l,u]=c.useState({}),[g,f]=c.useState(!1),[p,m]=c.useState(!1);c.useEffect(()=>{o(e?{title:e.title||"",description:e.description||"",content:e.content||"",thumbnail:e.thumbnail||"",images:e.images?.join(`
`)||"",techStack:e.techStack?.join(", ")||"",category:e.category||"web",tags:e.tags?.join(", ")||"",githubUrl:e.githubUrl||"",liveUrl:e.liveUrl||"",status:e.status||"public",featured:e.featured||!1}:{title:"",description:"",content:"",thumbnail:"",images:"",techStack:"",category:"web",tags:"",githubUrl:"",liveUrl:"",status:"public",featured:!1}),u({})},[e,r]),c.useEffect(()=>{if(r)m(!0),setTimeout(()=>f(!0),10);else{f(!1);const h=setTimeout(()=>m(!1),300);return()=>clearTimeout(h)}},[r]),c.useEffect(()=>{const h=x=>{x.key==="Escape"&&r&&n()};return r&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow=""}},[r,n]);const C=()=>{const h={};return s.title.trim()||(h.title="제목을 입력해주세요"),s.description.trim()||(h.description="설명을 입력해주세요"),s.content.trim()||(h.content="내용을 입력해주세요"),s.thumbnail.trim()||(h.thumbnail="썸네일 URL을 입력해주세요"),s.techStack.trim()||(h.techStack="기술 스택을 입력해주세요"),u(h),Object.keys(h).length===0},b=async h=>{if(h.preventDefault(),!!C()){d(!0);try{const x={title:s.title,description:s.description,content:s.content,thumbnail:s.thumbnail,images:s.images.split(`
`).map(v=>v.trim()).filter(Boolean),techStack:s.techStack.split(",").map(v=>v.trim()).filter(Boolean),category:s.category,tags:s.tags.split(",").map(v=>v.trim()).filter(Boolean),githubUrl:s.githubUrl||void 0,liveUrl:s.liveUrl||void 0,status:s.status,featured:s.featured};await t(x)}catch{}finally{d(!1)}}};return p?i.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 md:p-8 bg-background/80 backdrop-blur-sm transition-opacity duration-300 ${g?"opacity-100":"opacity-0"}`,onClick:n,children:i.jsxs("div",{className:`relative w-full max-w-3xl max-h-[90vh] overflow-y-auto bg-card border border-border rounded-lg shadow-xl transition-all duration-300 ${g?"opacity-100 scale-100":"opacity-0 scale-90"}`,onClick:h=>h.stopPropagation(),children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-6 py-4 bg-card border-b border-border",children:[i.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:e?"프로젝트 수정":"새 프로젝트 생성"}),i.jsx("button",{onClick:n,className:"p-2 rounded-md hover:bg-muted transition-all duration-200 text-muted-foreground hover:text-foreground cursor-pointer hover:rotate-90",disabled:a,children:i.jsx(zn,{className:"w-5 h-5 transition-transform duration-200"})})]}),i.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["제목 ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsx("input",{type:"text",value:s.title,onChange:h=>o({...s,title:h.target.value}),className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors placeholder:text-muted-foreground ${l.title?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"프로젝트 제목",disabled:a}),l.title&&i.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[i.jsx(Oe,{className:"w-3 h-3"}),l.title]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["설명 ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsx("textarea",{value:s.description,onChange:h=>o({...s,description:h.target.value}),rows:3,className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors resize-none placeholder:text-muted-foreground ${l.description?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"간단한 프로젝트 설명",disabled:a}),l.description&&i.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[i.jsx(Oe,{className:"w-3 h-3"}),l.description]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["내용 (Markdown) ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsx("textarea",{value:s.content,onChange:h=>o({...s,content:h.target.value}),rows:10,className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors resize-vertical font-mono text-sm placeholder:text-muted-foreground ${l.content?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"Markdown 형식으로 프로젝트 상세 내용 작성",disabled:a}),l.content&&i.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[i.jsx(Oe,{className:"w-3 h-3"}),l.content]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["썸네일 URL ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsx("input",{type:"url",value:s.thumbnail,onChange:h=>o({...s,thumbnail:h.target.value}),className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors placeholder:text-muted-foreground ${l.thumbnail?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"https://example.com/image.jpg",disabled:a}),l.thumbnail&&i.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[i.jsx(Oe,{className:"w-3 h-3"}),l.thumbnail]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["카테고리 ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsxs("select",{value:s.category,onChange:h=>o({...s,category:h.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors cursor-pointer",disabled:a,children:[i.jsx("option",{value:"web",children:"Web"}),i.jsx("option",{value:"mobile",children:"Mobile"}),i.jsx("option",{value:"backend",children:"Backend"}),i.jsx("option",{value:"fullstack",children:"Fullstack"}),i.jsx("option",{value:"design",children:"Design"}),i.jsx("option",{value:"other",children:"Other"})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["추가 이미지 URLs ",i.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(한 줄에 하나씩)"})]}),i.jsx("textarea",{value:s.images,onChange:h=>o({...s,images:h.target.value}),rows:3,className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors resize-vertical font-mono text-sm placeholder:text-muted-foreground",placeholder:`https://example.com/image1.jpg
https://example.com/image2.jpg`,disabled:a})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["기술 스택 ",i.jsx("span",{className:"text-destructive",children:"*"})," ",i.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(쉼표로 구분)"})]}),i.jsx("input",{type:"text",value:s.techStack,onChange:h=>o({...s,techStack:h.target.value}),className:`w-full px-4 py-2.5 rounded-lg border bg-muted text-foreground transition-colors placeholder:text-muted-foreground ${l.techStack?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-border focus:border-accent focus:ring-accent/20"} focus:outline-none focus:ring-2`,placeholder:"React, TypeScript, Vite",disabled:a}),l.techStack&&i.jsxs("p",{className:"mt-1.5 text-sm text-destructive flex items-center gap-1",children:[i.jsx(Oe,{className:"w-3 h-3"}),l.techStack]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["태그 ",i.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(쉼표로 구분)"})]}),i.jsx("input",{type:"text",value:s.tags,onChange:h=>o({...s,tags:h.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors placeholder:text-muted-foreground",placeholder:"portfolio, interactive, rtk-query",disabled:a})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:"GitHub URL"}),i.jsx("input",{type:"url",value:s.githubUrl,onChange:h=>o({...s,githubUrl:h.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors placeholder:text-muted-foreground",placeholder:"https://github.com/username/repo",disabled:a})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:"Live URL"}),i.jsx("input",{type:"url",value:s.liveUrl,onChange:h=>o({...s,liveUrl:h.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors placeholder:text-muted-foreground",placeholder:"https://example.com",disabled:a})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2 text-foreground",children:["공개 상태 ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsxs("select",{value:s.status,onChange:h=>o({...s,status:h.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-border bg-muted text-foreground focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors cursor-pointer",disabled:a,children:[i.jsx("option",{value:"public",children:"Public (공개)"}),i.jsx("option",{value:"private",children:"Private (비공개)"})]})]}),i.jsx("div",{className:"flex items-end pb-1",children:i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.featured,onChange:h=>o({...s,featured:h.target.checked}),className:"w-4 h-4 rounded border-border text-accent focus:ring-accent focus:ring-offset-0 cursor-pointer",disabled:a}),i.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Featured 프로젝트로 표시"})]})})]}),i.jsxs("div",{className:"flex flex-col-reverse sm:flex-row items-center justify-end gap-3 pt-4 border-t border-border",children:[i.jsx("button",{type:"button",onClick:n,disabled:a,className:"w-full sm:w-auto px-6 py-2.5 rounded-lg border border-border bg-background hover:bg-muted transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"취소"}),i.jsxs("button",{type:"submit",disabled:a,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-2.5 rounded-lg bg-accent text-white hover:bg-accent/90 transition-colors font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[a&&i.jsx(ht,{className:"w-4 h-4 animate-spin"}),a?"저장 중...":e?"수정하기":"생성하기"]})]})]})]})}):null},Ts=({project:e,onEdit:t,onDelete:n,onToggleFeatured:r})=>{const{attributes:s,listeners:o,setNodeRef:a,transform:d,transition:l,isDragging:u}=jn({id:e.id}),g={transform:Ce.Transform.toString(d),transition:l,opacity:u?.5:1,zIndex:u?1:0};return i.jsxs("tr",{ref:a,style:g,className:`hover:bg-muted/30 transition-colors ${u?"bg-muted/50":""}`,children:[i.jsx("td",{className:"px-3 py-4 w-10",children:i.jsx("button",{...s,...o,className:"p-1 rounded hover:bg-muted cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground transition-colors",title:"드래그하여 순서 변경",children:i.jsx(Qt,{className:"w-4 h-4"})})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"max-w-md",children:[i.jsx("div",{className:"font-semibold text-sm mb-1",children:e.title}),i.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-accent/10 text-accent border border-accent/20",children:e.category})}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsxs("button",{onClick:()=>r(e.id,e.featured),className:`inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${e.featured?"bg-accent text-white hover:bg-accent/90":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:[i.jsx(gt,{className:`w-3 h-3 ${e.featured?"fill-current":""}`}),e.featured?"YES":"NO"]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-center gap-3 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Zt,{className:"w-3 h-3"}),e.stats.views]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(en,{className:"w-3 h-3"}),e.stats.likes]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(tn,{className:"w-3 h-3"}),e.stats.comments]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("button",{onClick:()=>t(e),className:"p-2 rounded-md hover:bg-muted transition-colors text-foreground",title:"수정",children:i.jsx(nn,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>n(e.id,e.title),className:"p-2 rounded-md hover:bg-destructive/10 transition-colors text-destructive",title:"삭제",children:i.jsx(rn,{className:"w-4 h-4"})})]})})]})},Os=({project:e,onEdit:t,onDelete:n,onToggleFeatured:r})=>{const{attributes:s,listeners:o,setNodeRef:a,transform:d,transition:l,isDragging:u}=jn({id:e.id}),g={transform:Ce.Transform.toString(d),transition:l,opacity:u?.5:1,zIndex:u?1:0};return i.jsxs("div",{ref:a,style:g,className:`p-4 rounded-lg border border-border bg-card space-y-3 ${u?"shadow-lg":""}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("button",{...s,...o,className:"p-1 rounded hover:bg-muted cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground transition-colors flex-shrink-0",title:"드래그하여 순서 변경",children:i.jsx(Qt,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-semibold text-sm mb-1 truncate",children:e.title}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description})]}),e.featured&&i.jsx(gt,{className:"w-4 h-4 text-accent fill-current flex-shrink-0"})]}),i.jsx("div",{children:i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-accent/10 text-accent border border-accent/20",children:e.category})}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Zt,{className:"w-3 h-3"}),e.stats.views]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(en,{className:"w-3 h-3"}),e.stats.likes]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(tn,{className:"w-3 h-3"}),e.stats.comments]})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-border",children:[i.jsxs("button",{onClick:()=>r(e.id,e.featured),className:`flex-1 inline-flex items-center justify-center gap-1.5 px-3 py-2 rounded-md text-xs font-medium transition-colors ${e.featured?"bg-accent text-white hover:bg-accent/90":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:[i.jsx(gt,{className:`w-3 h-3 ${e.featured?"fill-current":""}`}),e.featured?"Featured":"Not Featured"]}),i.jsx("button",{onClick:()=>t(e),className:"px-3 py-2 rounded-md hover:bg-muted transition-colors text-foreground",title:"수정",children:i.jsx(nn,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>n(e.id,e.title),className:"px-3 py-2 rounded-md hover:bg-destructive/10 transition-colors text-destructive",title:"삭제",children:i.jsx(rn,{className:"w-4 h-4"})})]})]})},Ws=()=>{const[e,t]=c.useState(!1),[n,r]=c.useState(null),[s,o]=c.useState([]),{showAlert:a}=Un(),{showConfirm:d}=$n(),{data:l,isLoading:u,error:g}=Bn({limit:100,sort:"default"}),[f]=Xn(),[p]=Yn(),[m]=Wn(),[C,{isLoading:b}]=Hn(),h=c.useMemo(()=>l?.items&&s.length===0?l.items:s.length>0?s:l?.items||[],[l?.items,s]);c.useMemo(()=>{l?.items&&s.length===0&&o(l.items)},[l?.items]);const x=ir(Ut(jt,{activationConstraint:{distance:8}}),Ut(Dt,{coordinateGetter:ks})),v=c.useMemo(()=>h.map(N=>N.id),[h]),w=async N=>{const{active:R,over:z}=N;if(z&&R.id!==z.id){const B=h.findIndex(A=>A.id===R.id),H=h.findIndex(A=>A.id===z.id),oe=Et(h,B,H);o(oe);const ge=oe.map((A,me)=>({id:A.id,sortOrder:me}));try{await C(ge).unwrap(),a({title:"순서 저장",message:"프로젝트 순서가 저장되었습니다.",type:"success"})}catch{o(l?.items||[]),a({title:"순서 저장 실패",message:"프로젝트 순서 저장에 실패했습니다.",type:"error"})}}},S=async(N,R)=>{d({title:"프로젝트 삭제",message:`"${R}"을(를) 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`,type:"danger",confirmText:"삭제",cancelText:"취소",onConfirm:async()=>{try{await f(N).unwrap(),a({title:"삭제 완료",message:"프로젝트가 삭제되었습니다.",type:"success"})}catch{a({title:"삭제 실패",message:"프로젝트 삭제에 실패했습니다.",type:"error"})}}})},E=async(N,R)=>{try{await p({id:N,featured:!R}).unwrap(),a({title:R?"고정 해제":"고정 완료",message:R?"프로젝트 고정이 해제되었습니다.":"프로젝트가 Featured로 고정되었습니다.",type:"success"})}catch{a({title:"Featured 설정 실패",message:"Featured 상태 변경에 실패했습니다.",type:"error"})}},M=()=>{r(null),t(!0)},y=N=>{r(N),t(!0)},D=async N=>{try{n?(await p({id:n.id,...N}).unwrap(),a({title:"수정 완료",message:"프로젝트가 수정되었습니다.",type:"success"})):(await m(N).unwrap(),a({title:"생성 완료",message:"프로젝트가 생성되었습니다.",type:"success"})),t(!1),r(null)}catch(R){throw a({title:"저장 실패",message:"프로젝트 저장에 실패했습니다.",type:"error"}),R}},I=()=>{t(!1),r(null)};return u?i.jsx(zt,{children:i.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:i.jsx(ht,{className:"w-8 h-8 animate-spin text-accent"})})}):i.jsxs(zt,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"포트폴리오 프로젝트를 관리합니다"})]}),i.jsxs("button",{onClick:M,className:"inline-flex items-center gap-2 px-4 py-2 bg-accent text-white rounded-lg font-medium hover:bg-accent/90 transition-colors shadow-sm",children:[i.jsx(Fn,{className:"w-4 h-4"}),"새 프로젝트"]})]}),g&&i.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/20",children:i.jsx("p",{className:"text-sm text-destructive",children:"프로젝트를 불러올 수 없습니다. 다시 시도해주세요."})}),b&&i.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-accent/10 border border-accent/20",children:[i.jsx(ht,{className:"w-4 h-4 animate-spin text-accent"}),i.jsx("span",{className:"text-sm text-accent",children:"순서 저장 중..."})]}),i.jsx(cs,{sensors:x,collisionDetection:cr,onDragEnd:w,children:i.jsxs(ys,{items:v,strategy:xs,children:[i.jsx("div",{className:"hidden md:block overflow-hidden rounded-lg border border-border bg-card",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-border bg-muted/50",children:[i.jsx("th",{className:"px-3 py-3 w-10 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"순서"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"제목"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"카테고리"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Featured"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"통계"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"관리"})]})}),i.jsx("tbody",{className:"divide-y divide-border",children:h.map(N=>i.jsx(Ts,{project:N,onEdit:y,onDelete:S,onToggleFeatured:E},N.id))})]})})}),i.jsx("div",{className:"md:hidden space-y-4",children:h.map(N=>i.jsx(Os,{project:N,onEdit:y,onDelete:S,onToggleFeatured:E},N.id))})]})}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["전체 ",i.jsx("span",{className:"font-semibold text-foreground",children:h.length}),"개의 프로젝트"]})]}),i.jsx(As,{project:n,onSubmit:D,onCancel:I,isOpen:e})]})};export{Ws as AdminProjectsPage,Ws as default};
